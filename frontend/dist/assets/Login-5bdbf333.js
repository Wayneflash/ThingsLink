import{_ as k,u as V,a as x,r as v,b as z,c as i,o as S,d as I,e as o,f as s,w as t,g as L,h as n,i as N,m as R,j as q,k as B,l as C,n as E,p as F,t as J,E as f}from"./index-6b170f93.js";import{l as K}from"./auth-8bc2b470.js";const O={class:"login-container"},T={class:"login-left"},U={class:"login-left-content"},j={class:"logo-section"},D={class:"logo-icon"},M={class:"feature-list"},A={class:"feature-item"},G={class:"feature-item"},H={class:"feature-item"},P={class:"login-right"},Q={class:"login-form-wrapper"},W={__name:"Login",setup(X){const w=V(),y=x(),_=v(null),u=v(!1),a=z({username:"",password:""}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},p=async()=>{_.value&&await _.value.validate(async g=>{if(g)try{u.value=!0;const e=await K({username:a.username,password:a.password});if(e){const{token:l,user:d,menus:r}=e;localStorage.setItem("token",l),localStorage.setItem("userInfo",JSON.stringify(d)),localStorage.setItem("menus",JSON.stringify(r||[])),f.success("登录成功");const c=y.query.redirect||"/overview";w.push(c)}else f.error(e.message||"登录失败")}catch(e){console.error("登录失败:",e),f.error(e.message||"登录失败，请稍后重试")}finally{u.value=!1}})};return(g,e)=>{const l=i("el-icon"),d=i("el-input"),r=i("el-form-item"),c=i("el-button"),h=i("el-form");return S(),I("div",O,[o("div",T,[o("div",U,[o("div",j,[o("div",D,[s(l,{size:48},{default:t(()=>[s(n(N))]),_:1})]),e[2]||(e[2]=o("h1",{class:"logo-title"},"ThingsLink",-1)),e[3]||(e[3]=o("p",{class:"logo-subtitle"},"物联网平台",-1))]),o("div",M,[o("div",A,[s(l,{size:20},{default:t(()=>[s(n(R))]),_:1}),e[4]||(e[4]=o("span",null,"设备实时监控",-1))]),o("div",G,[s(l,{size:20},{default:t(()=>[s(n(q))]),_:1}),e[5]||(e[5]=o("span",null,"数据智能分析",-1))]),o("div",H,[s(l,{size:20},{default:t(()=>[s(n(B))]),_:1}),e[6]||(e[6]=o("span",null,"告警及时通知",-1))])])])]),o("div",P,[o("div",Q,[e[7]||(e[7]=o("div",{class:"form-header"},[o("h2",null,"欢迎登录"),o("p",null,"请输入您的账号和密码")],-1)),s(h,{ref_key:"loginFormRef",ref:_,model:a,rules:b,class:"login-form",onKeyup:L(p,["enter"])},{default:t(()=>[s(r,{prop:"username"},{default:t(()=>[s(d,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=m=>a.username=m),placeholder:"请输入用户名",size:"large",clearable:"",autocomplete:"off"},{prefix:t(()=>[s(l,null,{default:t(()=>[s(n(C))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(r,{prop:"password"},{default:t(()=>[s(d,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=m=>a.password=m),type:"password",placeholder:"请输入密码",size:"large","show-password":"",clearable:"",autocomplete:"new-password"},{prefix:t(()=>[s(l,null,{default:t(()=>[s(n(E))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(r,null,{default:t(()=>[s(c,{type:"primary",size:"large",class:"login-button",loading:u.value,onClick:p},{default:t(()=>[F(J(u.value?"登录中...":"登 录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}},$=k(W,[["__scopeId","data-v-9c624a92"]]);export{$ as default};
