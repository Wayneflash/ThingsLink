import{H as de,_ as Te,a as Se,u as ze,b as Z,r as y,y as ve,O as me,z as ge,c as w,B as $e,o as c,d as m,e as t,g as s,w as i,C as z,t as v,q as C,D as $,F as le,f as ne,G as ie,X as fe,k as A,E as g,I as ye,i as f,Y as Me,K as qe,j as Ve,Z as re,N as Ne,M as J,J as _e,$ as Ye,s as Pe,W as He}from"./index-60c90437.js";import{a as Le,e as Ie}from"./device-b5149a6f.js";import{a as Ae,b as Re}from"./product-ea5b16d5.js";import{g as Be}from"./system-3f8964e7.js";import{i as Ee}from"./index-18acf776.js";const Oe=R=>de({url:"/device-data/list",method:"post",data:R}),Ue=R=>de({url:"/commands/send",method:"post",data:R}),je=R=>de({url:"/device-logs/list",method:"post",data:R});const Fe={class:"device-detail-page"},We={class:"topbar"},Ge={key:0,class:"header-section"},Qe={class:"header-left"},Ze={class:"device-title-bar-compact"},Je={class:"device-title-text"},Ke={class:"title-row"},Xe={class:"device-name-wrapper"},et={class:"device-name-large"},tt={class:"device-code-badge"},at={class:"info-grid-compact"},ot={class:"info-card-compact"},st={class:"info-value"},lt={class:"info-card-compact"},nt={class:"info-value"},it={class:"info-card-compact"},rt={class:"info-value"},dt={class:"header-right"},ct={class:"info-section-title"},ut={class:"mqtt-card-compact"},pt={class:"mqtt-line"},vt={class:"mqtt-value"},mt={class:"mqtt-value"},gt={class:"mqtt-line"},ft={class:"mqtt-code-inline"},yt={class:"mqtt-line"},_t={class:"mqtt-code-inline"},ht={class:"mqtt-line"},bt={class:"mqtt-code-inline"},wt={class:"tabs"},Ct={key:0,class:"data-grid-wrapper"},xt={class:"data-grid"},Dt={class:"data-label"},kt={class:"data-value"},Tt={key:0,class:"data-unit"},St={class:"data-time"},zt={key:1,class:"empty-data"},$t={class:"history-toolbar"},Mt={style:{flex:"1",display:"flex",gap:"12px","justify-content":"flex-end"}},qt={class:"history-chart-container"},Vt={key:0,class:"empty-data"},Nt={class:"history-table-wrapper"},Yt={class:"history-table-container"},Pt={key:0},Ht={key:0,class:"unit-text"},Lt={key:1,style:{color:"#ccc"}},It={key:1,class:"empty-data"},At={class:"command-grid"},Rt=["onClick"],Bt={class:"command-name"},Et={key:0,class:"empty-data"},Ot={class:"log-filter-bar"},Ut={class:"log-table-wrapper"},jt={key:1,class:"empty-data"},Ft={__name:"DeviceDetail",setup(R){const E=Se(),he=ze(),d=Z({id:null,deviceName:"",deviceCode:"",productId:null,productName:"",groupId:null,groupName:"",groupPath:"",status:0,lastOnlineTime:"",createTime:""}),x=y([]),P=y([]),O=y([]),K=y("-"),M=y("chart"),q=y([]),h=y([]),H=y(null);let D=null;const k=Z({currentPage:1,pageSize:50,total:0}),b=y("realtime"),U=y([]),j=y(!1),X=y({logType:""}),F=y([]),V=Z({currentPage:1,pageSize:20,total:0}),L=Z({broker:"",port:"",username:"",password:""});y(!1);const be=async()=>{try{const a=await Be();a&&Object.assign(L,a)}catch(a){console.error("加载MQTT配置失败:",a),L.broker="localhost",L.port="1883",L.username="admin",L.password="admin123."}},we=async()=>{var a,e,o;try{const l=E.query.deviceCode||E.params.deviceCode;if(console.log("设备编码:",l,"路由参数:",E.query,E.params),!l){g.error("设备编码不存在"),B();return}await be(),console.log("请求设备详情，参数:",{deviceCode:l});const u=await Le({deviceCode:l});console.log("设备详情响应数据:",u),u&&typeof u=="object"?(Object.assign(d,u),ee()):(g.error("获取设备详情失败：返回数据格式错误"),console.error("返回数据:",u),B())}catch(l){console.error("加载设备详情失败:",l),console.error("错误详情:",{message:l.message,response:l.response,data:(a=l.response)==null?void 0:a.data});const u=((o=(e=l.response)==null?void 0:e.data)==null?void 0:o.message)||l.message||"加载设备详情失败";g.error(u),B()}},ce=async()=>{if(!d.productId){console.warn("产品ID不存在");return}if(!(x.value.length>0))try{const a=await Ae(d.productId);a&&(x.value=a||[],console.log("产品属性加载完成:",x.value.length,"个"))}catch(a){console.error("加载产品属性失败:",a),g.error("加载产品属性失败")}},Ce=async()=>{if(!d.productId){console.warn("产品ID不存在");return}if(!(P.value.length>0))try{const a=await Re(d.productId);a&&(Array.isArray(a)?P.value=a:a.list&&Array.isArray(a.list)?P.value=a.list:P.value=[],console.log("产品命令加载完成:",P.value.length,"个"))}catch(a){console.error("加载产品命令失败:",a),g.error("加载产品命令失败")}},ee=async()=>{try{x.value.length===0&&await ce();const a=await Ie({deviceCode:d.deviceCode});if(a){const e=a.reportTime;if(e)K.value=e.includes("T")?e.replace("T"," "):e;else{const l=new Date,u=l.getFullYear(),N=String(l.getMonth()+1).padStart(2,"0"),Y=String(l.getDate()).padStart(2,"0"),r=String(l.getHours()).padStart(2,"0"),p=String(l.getMinutes()).padStart(2,"0"),_=String(l.getSeconds()).padStart(2,"0");K.value=`${u}-${N}-${Y} ${r}:${p}:${_}`}const o=a.data||{};O.value=x.value.map(l=>{const u=o[l.addr];return{key:l.addr,label:l.attrName,value:u!=null&&u!==""?u:"-",unit:l.unit}})}else O.value=x.value.map(e=>({key:e.addr,label:e.attrName,value:"-",unit:e.unit}))}catch(a){console.error("加载实时数据失败:",a),g.error("加载实时数据失败")}},xe=ve(()=>{const a=(k.currentPage-1)*k.pageSize,e=a+k.pageSize;return h.value.slice(a,e)}),De=ve(()=>"calc(100vh - 320px)"),te=async()=>{try{if(!q.value||q.value.length!==2){g.warning("请选择查询时间范围");return}const a=await Oe({deviceCode:d.deviceCode,startTime:q.value[0],endTime:q.value[1]});if(a){const e=new Map;a.forEach(o=>{let l="";o.ctime&&(l=o.ctime.includes("T")?o.ctime.replace("T"," "):o.ctime),e.has(l)||e.set(l,{reportTime:l}),e.get(l)[o.addr]=o.addrv}),h.value=Array.from(e.values()).sort((o,l)=>new Date(l.reportTime)-new Date(o.reportTime)),k.total=h.value.length,k.currentPage=1,g.success(`查询成功，共 ${h.value.length} 条记录`),M.value==="chart"&&ye(()=>{ae()})}}catch(a){console.error("查询历史数据失败:",a),g.error("查询历史数据失败")}},ae=()=>{if(console.log("=== 开始渲染图表 ==="),console.log("historyChartRef.value:",H.value),console.log("historyData.value.length:",h.value.length),console.log("productAttributes.value.length:",x.value.length),!H.value){console.error("图表容器未找到");return}const a=H.value.getBoundingClientRect();if(console.log("容器尺寸:",a.width,"x",a.height),a.width===0||a.height===0){console.error("容器尺寸为0，可能未显示"),setTimeout(()=>{if(H.value){const r=H.value.getBoundingClientRect();r.width>0&&r.height>0&&ae()}},200);return}if(h.value.length===0){console.warn("无历史数据");return}if(x.value.length===0){console.warn("产品属性未加载");return}D&&(D.dispose(),D=null),D=Ee(H.value),console.log("图表实例已创建");const e=[...h.value].sort((r,p)=>new Date(r.reportTime.replace("T"," "))-new Date(p.reportTime.replace("T"," ")));console.log("排序后数据:",e.length,"条");const o=e.map(r=>{const p=r.reportTime.replace("T"," ");return p.split(" ")[1]||p});console.log("时间轴数据:",o.slice(0,5));const l=x.value.filter(r=>{const p=r.dataType;return p==="int"||p==="float"||p==="double"});if(console.log("数值属性:",l.map(r=>`${r.attrName}(${r.addr})`)),l.length===0){console.warn("没有数值类型的属性"),g.warning("当前产品没有可绘制的数值属性");return}const u=["#409eff","#67c23a","#e6a23c","#f56c6c","#909399"],N=l.map((r,p)=>{const _=e.map(I=>{const S=I[r.addr];return S!=null&&S!==""?Number(S):null}),T=_.filter(I=>I!==null).length;return console.log(`${r.attrName}: ${T} 个有效数据点`),{name:r.attrName,type:"line",smooth:!0,symbol:"circle",symbolSize:6,data:_,itemStyle:{color:u[p%u.length]},lineStyle:{width:2},connectNulls:!1}}),Y={title:{text:"历史数据趋势图",left:"center",top:10,textStyle:{fontSize:16,fontWeight:600,color:"#333"}},backgroundColor:"#fff",tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#ddd",borderWidth:1,padding:10,textStyle:{color:"#333",fontSize:12},formatter:function(r){let p=`<div style="font-weight: bold; margin-bottom: 8px; font-size: 13px;">${r[0].axisValue}</div>`;return r.forEach(_=>{if(_.value!==null){const T=l.find(S=>S.attrName===_.seriesName),I=(T==null?void 0:T.unit)||"";p+=`<div style="margin: 4px 0;">${_.marker} ${_.seriesName}: <span style="font-weight: bold;">${_.value}</span> ${I}</div>`}}),p}},legend:{data:N.map(r=>r.name),top:30,type:"scroll",textStyle:{fontSize:11}},grid:{left:55,right:35,bottom:50,top:65,containLabel:!1},xAxis:{type:"category",boundaryGap:!1,data:o,axisLine:{lineStyle:{color:"#999"}},axisLabel:{color:"#666",fontSize:11,rotate:45,interval:Math.floor(o.length/15)||0},splitLine:{show:!1}},yAxis:{type:"value",axisLine:{show:!0,lineStyle:{color:"#999"}},axisLabel:{color:"#666",fontSize:11},splitLine:{lineStyle:{color:"#e5e5e5",type:"dashed"}}},dataZoom:[{type:"inside",start:0,end:100,zoomOnMouseWheel:!0,moveOnMouseMove:!0},{type:"slider",start:0,end:100,height:20,bottom:8,borderColor:"#ccc",fillerColor:"rgba(64, 158, 255, 0.2)",handleStyle:{color:"#409eff"}}],series:N};console.log("设置图表配置"),D.setOption(Y,!0),console.log("图表渲染完成"),console.log("=== 渲染图表结束 ===")};me(M,async a=>{a==="chart"&&(h.value.length===0?(console.log("图表视图无数据，开始查询..."),await te()):(console.log("图表视图有数据，渲染图表..."),setTimeout(()=>{ye(()=>{ae()})},100)))}),me([()=>b.value,()=>M.value],()=>{b.value==="history"&&M.value==="chart"&&D&&setTimeout(()=>{D&&D.resize()},100)}),ge(()=>{window.addEventListener("resize",()=>{D&&D.resize()})});const ke=async a=>{if(console.log("点击命令按钮:",a),console.log("设备状态:",d.status),d.status!==1){g.warning("设备离线，无法下发命令");return}try{await He.confirm(`是否确认执行 ${a.commandName||a.addr} 指令？`,"命令确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ue({deviceCode:d.deviceCode,commands:[{addr:a.addr,addrv:a.commandValue}]})&&(g.success("命令已下发"),setTimeout(()=>{ee()},1e3))}catch(e){e!=="cancel"&&(console.error("发送命令失败:",e),g.error("发送命令失败"))}},W=async a=>{b.value=a,a==="realtime"?ee():a==="history"?(await ce(),q.value.length===0&&ue(),h.value.length===0&&await te()):a==="command"?await Ce():a==="log"&&G()},G=async()=>{var a,e;j.value=!0;try{const o=await je({page:V.currentPage,pageSize:V.pageSize,deviceCode:d.deviceCode,logType:X.value.logType,startTime:(a=F.value)==null?void 0:a[0],endTime:(e=F.value)==null?void 0:e[1]});U.value=(o==null?void 0:o.list)||[],V.total=(o==null?void 0:o.total)||0}catch(o){console.error("加载设备日志失败:",o),g.error("加载设备日志失败")}finally{j.value=!1}},ue=()=>{const a=new Date,e=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);q.value=[oe(e),oe(a)]},oe=a=>{const e=new Date(a),o=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0"),N=String(e.getHours()).padStart(2,"0"),Y=String(e.getMinutes()).padStart(2,"0"),r=String(e.getSeconds()).padStart(2,"0");return`${o}-${l}-${u} ${N}:${Y}:${r}`},B=()=>{he.push("/devices")},se=async(a,e)=>{try{if(navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(a),g({message:`${e}已复制到剪贴板`,type:"success",duration:2e3});return}const o=document.createElement("textarea");o.value=a,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.select();try{const l=document.execCommand("copy");if(document.body.removeChild(o),l)g({message:`${e}已复制到剪贴板`,type:"success",duration:2e3});else throw new Error("execCommand failed")}catch(l){throw document.body.removeChild(o),l}}catch(o){console.error("复制失败:",o),g.error("复制失败，请手动选择复制")}};return ge(()=>{we(),ue()}),(a,e)=>{const o=w("el-icon"),l=w("el-button"),u=w("el-radio-button"),N=w("el-radio-group"),Y=w("el-date-picker"),r=w("el-table-column"),p=w("el-table"),_=w("el-pagination"),T=w("el-option"),I=w("el-select"),S=w("el-tag"),pe=$e("loading");return c(),m("div",Fe,[t("div",We,[t("div",{class:"breadcrumb"},[t("span",{onClick:B,class:"breadcrumb-link"},"设备管理"),e[15]||(e[15]=t("span",{class:"breadcrumb-sep"},"/",-1)),e[16]||(e[16]=t("span",{class:"breadcrumb-current"},"设备详情",-1))]),s(l,{type:"primary",onClick:B,size:"default",class:"back-btn"},{default:i(()=>[s(o,{style:{"margin-right":"6px"}},{default:i(()=>[s(f(Me))]),_:1}),e[17]||(e[17]=C(" 返回设备列表 ",-1))]),_:1})]),b.value!=="history"?(c(),m("div",Ge,[t("div",Qe,[t("div",Ze,[t("div",{class:z(["device-icon-large",d.status===1?"icon-online":"icon-offline"])},[s(o,{size:36},{default:i(()=>[s(f(qe))]),_:1})],2),t("div",Je,[t("div",Ke,[t("div",Xe,[t("h1",et,v(d.deviceName||"-"),1),t("div",tt,v(d.deviceCode||"-"),1)]),t("div",{class:z(["status-badge",d.status===1?"status-online":"status-offline"])},[e[18]||(e[18]=t("span",{class:"status-dot"},null,-1)),t("span",null,v(d.status===1?"在线":"离线"),1)],2)])])]),t("div",at,[t("div",ot,[e[19]||(e[19]=t("div",{class:"info-label"},"产品类型",-1)),t("div",st,v(d.productName||"-"),1)]),t("div",lt,[e[20]||(e[20]=t("div",{class:"info-label"},"所属分组",-1)),t("div",nt,v(d.groupName||"-"),1)]),t("div",it,[e[21]||(e[21]=t("div",{class:"info-label"},"最后上线",-1)),t("div",rt,v(oe(d.lastOnlineTime)||"-"),1)])])]),t("div",dt,[t("div",ct,[s(o,{class:"section-icon",size:20},{default:i(()=>[s(f(Ve))]),_:1}),e[22]||(e[22]=C(" MQTT连接信息 ",-1))]),t("div",ut,[t("div",pt,[e[23]||(e[23]=t("span",{class:"mqtt-label"},"地址:",-1)),t("span",vt,v(L.broker||"-"),1),e[24]||(e[24]=t("span",{class:"mqtt-sep"},"|",-1)),e[25]||(e[25]=t("span",{class:"mqtt-label"},"端口:",-1)),t("span",mt,v(L.port||"-"),1)]),t("div",gt,[e[26]||(e[26]=t("span",{class:"mqtt-label"},"Client ID:",-1)),t("code",ft,v(d.deviceCode||"-"),1),s(l,{text:"",class:"copy-btn",onClick:e[0]||(e[0]=n=>se(d.deviceCode,"Client ID")),size:"small"},{default:i(()=>[s(o,null,{default:i(()=>[s(f(re))]),_:1})]),_:1})]),t("div",yt,[e[27]||(e[27]=t("span",{class:"mqtt-label"},"发布主题:",-1)),t("code",_t,"ssc/"+v(d.deviceCode||"-")+"/report",1),s(l,{text:"",class:"copy-btn",onClick:e[1]||(e[1]=n=>se(`ssc/${d.deviceCode}/report`,"发布主题")),size:"small"},{default:i(()=>[s(o,null,{default:i(()=>[s(f(re))]),_:1})]),_:1})]),t("div",ht,[e[28]||(e[28]=t("span",{class:"mqtt-label"},"订阅主题:",-1)),t("code",bt,"ssc/"+v(d.deviceCode||"-")+"/command",1),s(l,{text:"",class:"copy-btn",onClick:e[2]||(e[2]=n=>se(`ssc/${d.deviceCode}/command`,"订阅主题")),size:"small"},{default:i(()=>[s(o,null,{default:i(()=>[s(f(re))]),_:1})]),_:1})])])])])):$("",!0),t("div",wt,[t("button",{class:z(["tab",{active:b.value==="realtime"}]),onClick:e[3]||(e[3]=n=>W("realtime"))}," 实时数据 ",2),t("button",{class:z(["tab",{active:b.value==="history"}]),onClick:e[4]||(e[4]=n=>W("history"))}," 历史数据 ",2),t("button",{class:z(["tab",{active:b.value==="command"}]),onClick:e[5]||(e[5]=n=>W("command"))}," 命令控制 ",2),t("button",{class:z(["tab",{active:b.value==="log"}]),onClick:e[6]||(e[6]=n=>W("log"))}," 设备日志 ",2)]),t("div",{class:z(["tab-content",{active:b.value==="realtime"}])},[O.value.length>0?(c(),m("div",Ct,[t("div",xt,[(c(!0),m(le,null,ne(O.value,n=>(c(),m("div",{key:n.key,class:"data-card"},[t("div",Dt,v(n.label),1),t("div",null,[t("span",kt,v(n.value),1),n.unit?(c(),m("span",Tt,v(n.unit),1)):$("",!0)]),t("div",St,[s(o,{class:"time-icon",size:14},{default:i(()=>[s(f(Ne))]),_:1}),C(" "+v(K.value),1)])]))),128))])])):(c(),m("div",zt,[s(o,{class:"empty-icon",size:64},{default:i(()=>[s(f(J))]),_:1}),e[29]||(e[29]=t("div",{class:"empty-text"},"暂无实时数据",-1))]))],2),t("div",{class:z(["tab-content",{active:b.value==="history"}])},[t("div",$t,[s(N,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=n=>M.value=n),size:"small"},{default:i(()=>[s(u,{label:"chart"},{default:i(()=>[s(o,{size:16,style:{"margin-right":"4px"}},{default:i(()=>[s(f(_e))]),_:1}),e[30]||(e[30]=C(" 趋势图 ",-1))]),_:1}),s(u,{label:"table"},{default:i(()=>[s(o,{size:16,style:{"margin-right":"4px"}},{default:i(()=>[s(f(J))]),_:1}),e[31]||(e[31]=C(" 表格 ",-1))]),_:1})]),_:1},8,["modelValue"]),t("div",Mt,[s(Y,{modelValue:q.value,"onUpdate:modelValue":e[8]||(e[8]=n=>q.value=n),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"400px"}},null,8,["modelValue"]),s(l,{type:"primary",onClick:te},{default:i(()=>[...e[32]||(e[32]=[C("查询",-1)])]),_:1})])]),ie(t("div",qt,[t("div",{ref_key:"historyChartRef",ref:H,class:"history-chart"},null,512),h.value.length===0?(c(),m("div",Vt,[s(o,{class:"empty-icon",size:64},{default:i(()=>[s(f(_e))]),_:1}),e[33]||(e[33]=t("div",{class:"empty-text"},"暂无历史数据",-1))])):$("",!0)],512),[[fe,M.value==="chart"]]),ie(t("div",Nt,[t("div",Yt,[s(p,{data:xe.value,stripe:"",style:{width:"100%"},height:De.value},{default:i(()=>[s(r,{prop:"reportTime",label:"上报时间",width:"220",fixed:""}),(c(!0),m(le,null,ne(x.value,n=>(c(),A(r,{key:n.addr,label:n.attrName,"min-width":"100"},{default:i(({row:Q})=>[Q[n.addr]!==void 0&&Q[n.addr]!==null?(c(),m("span",Pt,[C(v(Q[n.addr])+" ",1),n.unit?(c(),m("span",Ht,v(n.unit),1)):$("",!0)])):(c(),m("span",Lt,"-"))]),_:2},1032,["label"]))),128))]),_:1},8,["data","height"]),h.value.length>0?(c(),A(_,{key:0,"current-page":k.currentPage,"onUpdate:currentPage":e[9]||(e[9]=n=>k.currentPage=n),"page-size":k.pageSize,"onUpdate:pageSize":e[10]||(e[10]=n=>k.pageSize=n),"page-sizes":[20,50,100,200],total:k.total,layout:"total, sizes, prev, pager, next, jumper",class:"history-pagination"},null,8,["current-page","page-size","total"])):$("",!0),h.value.length===0?(c(),m("div",It,[s(o,{class:"empty-icon",size:64},{default:i(()=>[s(f(J))]),_:1}),e[34]||(e[34]=t("div",{class:"empty-text"},"暂无历史数据",-1))])):$("",!0)])],512),[[fe,M.value==="table"]])],2),t("div",{class:z(["tab-content",{active:b.value==="command"}])},[t("div",At,[(c(!0),m(le,null,ne(P.value,n=>(c(),m("button",{key:n.id,class:"command-btn",onClick:Q=>ke(n)},[s(o,{class:"command-icon",size:40},{default:i(()=>[s(f(Ye))]),_:1}),t("div",Bt,v(n.commandName),1)],8,Rt))),128)),P.value.length===0?(c(),m("div",Et,[s(o,{class:"empty-icon",size:64},{default:i(()=>[s(f(Pe))]),_:1}),e[35]||(e[35]=t("div",{class:"empty-text"},"暂无可用命令",-1))])):$("",!0)])],2),t("div",{class:z(["tab-content",{active:b.value==="log"}])},[t("div",Ot,[s(I,{modelValue:X.value.logType,"onUpdate:modelValue":e[11]||(e[11]=n=>X.value.logType=n),placeholder:"日志类型",clearable:"",style:{width:"150px"}},{default:i(()=>[s(T,{label:"全部",value:""}),s(T,{label:"设备上线",value:"online"}),s(T,{label:"设备离线",value:"offline"}),s(T,{label:"命令下发",value:"command"})]),_:1},8,["modelValue"]),s(Y,{modelValue:F.value,"onUpdate:modelValue":e[12]||(e[12]=n=>F.value=n),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"380px"}},null,8,["modelValue"]),s(l,{type:"primary",onClick:G},{default:i(()=>[...e[36]||(e[36]=[C("查询",-1)])]),_:1})]),t("div",Ut,[ie((c(),A(p,{data:U.value,stripe:"",style:{width:"100%"}},{default:i(()=>[s(r,{prop:"createTime",label:"时间",width:"180"}),s(r,{prop:"logType",label:"类型",width:"120"},{default:i(({row:n})=>[n.logType==="online"?(c(),A(S,{key:0,type:"success"},{default:i(()=>[...e[37]||(e[37]=[C("设备上线",-1)])]),_:1})):n.logType==="offline"?(c(),A(S,{key:1,type:"danger"},{default:i(()=>[...e[38]||(e[38]=[C("设备离线",-1)])]),_:1})):(c(),A(S,{key:2,type:"info"},{default:i(()=>[...e[39]||(e[39]=[C("命令下发",-1)])]),_:1}))]),_:1}),s(r,{prop:"logDetail",label:"详情"})]),_:1},8,["data"])),[[pe,j.value]]),U.value.length>0?(c(),A(_,{key:0,"current-page":V.currentPage,"onUpdate:currentPage":e[13]||(e[13]=n=>V.currentPage=n),"page-size":V.pageSize,"onUpdate:pageSize":e[14]||(e[14]=n=>V.pageSize=n),total:V.total,"page-sizes":[20,50,100],layout:"total, sizes, prev, pager, next, jumper",class:"log-pagination",onSizeChange:G,onCurrentChange:G},null,8,["current-page","page-size","total"])):$("",!0),U.value.length===0&&!j.value?(c(),m("div",jt,[s(o,{class:"empty-icon",size:64},{default:i(()=>[s(f(J))]),_:1}),e[40]||(e[40]=t("div",{class:"empty-text"},"暂无日志数据",-1))])):$("",!0)])],2)])}}},Kt=Te(Ft,[["__scopeId","data-v-6f8eb939"]]);export{Kt as default};
