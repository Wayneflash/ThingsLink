import{_ as vt,u as pt,r as m,Y as ht,Z as gt,E as Q,$ as ft,c as L,a0 as _t,o as u,d as v,e as t,B as $,t as l,a1 as z,g as d,w as p,y as Y,F as q,f as P,a2 as b,a3 as A,i as w,a4 as mt,q as S,a5 as wt,v as yt,a6 as Ct,n as Dt,X as I,x as tt,J as zt}from"./index-9d357f7b.js";import{i as G}from"./index-18acf776.js";const bt={class:"dashboard-container"},St={class:"stats-cards"},xt={class:"stat-icon-wrapper"},Tt={key:0,class:"stat-trend"},kt={class:"stat-info"},Mt={class:"stat-value"},Lt={class:"stat-detail"},$t={class:"online"},At={class:"offline"},Nt={class:"stat-icon-wrapper"},Bt={key:0,class:"stat-trend"},Rt={class:"trend-up"},Vt={class:"stat-info"},Ft={class:"stat-value"},Ot={class:"stat-detail"},Ht={style:{color:"#999"}},Wt={class:"stat-info"},Et={class:"stat-value"},Ut={class:"stat-card stat-card-info stat-card-no-click"},Yt={class:"stat-icon-wrapper"},qt={key:0,class:"stat-trend"},Pt={class:"stat-info"},Gt={class:"stat-value"},Xt={class:"stat-detail"},jt={style:{color:"#999"}},Jt={class:"stat-info"},Kt={class:"stat-value"},Zt={class:"stat-detail"},Qt={class:"critical"},It={class:"warning"},te={class:"stat-info"},ee={class:"stat-value"},se={class:"charts-row"},ae={class:"chart-card"},oe={class:"chart-header"},ne={class:"chart-title-wrapper"},ie={class:"chart-actions"},le={class:"chart-card"},re={class:"chart-header"},de={class:"chart-title-wrapper"},ce={class:"charts-row"},ue={class:"chart-card"},ve={class:"chart-header"},pe={class:"chart-title-wrapper"},he={class:"chart-card"},ge={class:"chart-header"},fe={class:"chart-title-wrapper"},_e={class:"group-stats-list"},me={class:"group-stat-header"},we={class:"group-name"},ye={class:"group-count"},Ce={class:"group-stat-bar"},De={class:"group-stat-bar-info"},ze={class:"online-count"},be={class:"offline-count"},Se={key:0,class:"empty-state"},xe={class:"bottom-row"},Te={class:"info-card"},ke={class:"card-header"},Me={class:"card-title-wrapper"},Le={class:"alarm-list"},$e=["onClick"],Ae={class:"alarm-icon-wrapper"},Ne={class:"alarm-icon"},Be={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Re={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ve={key:2,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Fe={class:"alarm-content"},Oe={class:"alarm-title"},He={class:"alarm-desc"},We={class:"alarm-time"},Ee={class:"alarm-status"},Ue={key:0,class:"empty-state"},Ye={class:"info-card"},qe={class:"card-header"},Pe={class:"card-title-wrapper"},Ge={class:"device-list"},Xe=["onClick"],je={class:"device-icon-wrapper"},Je={class:"device-info"},Ke={class:"device-name"},Ze={class:"device-meta"},Qe={class:"device-status"},Ie={key:0,class:"empty-state"},ts={__name:"Overview",setup(es){const y=pt(),o=m({totalDevices:0,onlineDevices:0,offlineDevices:0,todayDataCount:0,yesterdayDataCount:0,alarmCount:0,onlineRate:0,deviceTrend:0,dataTrend:0,productDistribution:[],recentDevices:[],productCount:0,todayAlarmCount:0,todayCriticalCount:0,todayWarningCount:0,todayUnhandledCount:0}),N=m(null),B=m(null),R=m(null);let h=null,g=null,f=null;const V=m(!1),F=m(!1),O=m(!1),x=m("24h"),k=m([]),M=m([]);let H=null;ht(()=>o.value.totalDevices===0?0:Math.round(o.value.onlineDevices/o.value.totalDevices*100));const X=async()=>{try{const s=await b.post("/devices/statistics");if(console.log("统计数据:",s),s){const e=s.totalDevices>0?Math.round(s.onlineDevices/s.totalDevices*100):0,n=(s.recentDevices||[]).slice(0,8).map(r=>{var c;if(!r.productName&&r.productId){const _=(c=s.productDistribution)==null?void 0:c.find(a=>a.productId===r.productId);_&&(r.productName=_.productName)}return r}),i=await at();o.value={totalDevices:s.totalDevices||0,onlineDevices:s.onlineDevices||0,offlineDevices:s.offlineDevices||0,todayDataCount:s.todayDataCount||0,yesterdayDataCount:0,alarmCount:i.total||0,unhandledAlarmCount:i.unhandled||0,criticalCount:i.critical||0,warningCount:i.warning||0,infoCount:i.info||0,onlineRate:e,deviceTrend:0,dataTrend:0,productDistribution:s.productDistribution||[],recentDevices:n,productCount:s.productCount||0,todayAlarmCount:i.todayAlarmCount||0,todayCriticalCount:i.todayCriticalCount||0,todayWarningCount:i.todayWarningCount||0,todayUnhandledCount:i.todayUnhandledCount||0}}}catch(s){console.error("加载统计数据失败:",s),Q.error("加载统计数据失败")}},W=async()=>{if(N.value){V.value=!0;try{const s=await b.post("/statistics/data-trend",{range:x.value}),e=s.timeLabels||[],n=s.dataCounts||[];await A(),h||(h=G(N.value));const i={tooltip:{trigger:"axis",backgroundColor:"rgba(50, 50, 50, 0.9)",borderColor:"transparent",textStyle:{color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e,axisLine:{lineStyle:{color:"#e0e0e0"}},axisLabel:{color:"#999",fontSize:12}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#999",fontSize:12},splitLine:{lineStyle:{color:"#f0f0f0",type:"dashed"}}},series:[{name:"数据量",type:"line",smooth:!0,data:n,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(102, 126, 234, 0.3)"},{offset:1,color:"rgba(102, 126, 234, 0.05)"}]}},lineStyle:{color:"#667eea",width:3},itemStyle:{color:"#667eea"},symbol:"circle",symbolSize:6}]};h.setOption(i),window.addEventListener("resize",()=>{h==null||h.resize()})}catch(s){console.error("加载数据趋势失败:",s)}finally{V.value=!1}}},et=async()=>{if(!(!B.value||o.value.productDistribution.length===0)){F.value=!0;try{await A(),g||(g=G(B.value));const s=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#11998e","#38ef7d"],e=o.value.productDistribution.map((i,r)=>({value:i.count,name:i.productName,itemStyle:{color:s[r%s.length]}})),n={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",textStyle:{color:"#666",fontSize:12}},series:[{type:"pie",radius:["40%","70%"],center:["35%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:`{b}
{c}台 ({d}%)`,fontSize:12},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold"}},data:e}]};g.setOption(n),window.addEventListener("resize",()=>{g==null||g.resize()})}catch(s){console.error("加载产品分布图失败:",s)}finally{F.value=!1}}},st=async()=>{if(R.value){O.value=!0;try{await A(),f||(f=G(R.value));const s={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",textStyle:{color:"#666",fontSize:12}},series:[{type:"pie",radius:"65%",center:["40%","50%"],data:[{value:o.value.onlineDevices,name:"在线",itemStyle:{color:"#67c23a"}},{value:o.value.offlineDevices,name:"离线",itemStyle:{color:"#909399"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{show:!0,formatter:`{b}
{c}台 ({d}%)`,fontSize:14}}]};f.setOption(s),window.addEventListener("resize",()=>{f==null||f.resize()})}catch(s){console.error("加载状态分布图失败:",s)}finally{O.value=!1}}},j=async()=>{try{const s=await b.post("/devices/list",{page:1,pageSize:1e4});console.log("设备列表数据:",s);const e=(s==null?void 0:s.list)||[],n={};e.forEach(i=>{const r=i.groupId||0,c=i.groupName||"未分组";n[r]||(n[r]={groupId:r,groupName:c,deviceCount:0,onlineCount:0,offlineCount:0}),n[r].deviceCount++,i.status===1?n[r].onlineCount++:n[r].offlineCount++}),k.value=Object.values(n).sort((i,r)=>r.deviceCount-i.deviceCount).slice(0,5)}catch(s){console.error("加载分组统计失败:",s),k.value=[]}},at=async()=>{try{const s=await b.post("/alarm-log/statistics");console.log("报警统计数据:",s);const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999),r=await b.post("/alarm-log/list",{page:1,pageSize:1e4,startTime:D(n),endTime:D(i)}),c=(r==null?void 0:r.list)||[],_=c.filter(T=>T.alarmLevel==="critical").length,a=c.filter(T=>T.alarmLevel==="warning").length,U=c.filter(T=>T.status===0).length;return{total:(s==null?void 0:s.total)||0,unhandled:(s==null?void 0:s.unhandled)||0,critical:(s==null?void 0:s.critical)||0,warning:(s==null?void 0:s.warning)||0,info:(s==null?void 0:s.info)||0,todayAlarmCount:c.length,todayCriticalCount:_,todayWarningCount:a,todayUnhandledCount:U}}catch(s){return console.error("加载报警统计失败:",s),{total:0,unhandled:0,critical:0,warning:0,info:0,todayAlarmCount:0,todayCriticalCount:0,todayWarningCount:0,todayUnhandledCount:0}}},J=async()=>{try{const s=await b.post("/alarm-log/list",{page:1,pageSize:5,status:0});console.log("最近报警数据:",s),M.value=(s==null?void 0:s.list)||[]}catch(s){console.error("加载最近报警失败:",s),M.value=[]}},ot=s=>o.value.totalDevices===0?0:Math.round(s/o.value.totalDevices*100),C=s=>s>=1e4?(s/1e4).toFixed(1)+"W":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString(),K=s=>s>0?`+${s}%`:`${s}%`,Z=s=>{if(!s)return"-";const e=new Date(s);if(isNaN(e.getTime()))return"-";const n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),c=String(e.getHours()).padStart(2,"0"),_=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${n}-${i}-${r} ${c}:${_}:${a}`},D=s=>{const e=new Date(s),n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),c=String(e.getHours()).padStart(2,"0"),_=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${n}-${i}-${r} ${c}:${_}:${a}`},E=(s={})=>{y.push({path:"/devices",query:s})},nt=()=>{y.push("/products/list")},it=(s={})=>{y.push({path:"/alarms",query:s})},lt=()=>{const s=new Date,e=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0),n=new Date(s.getFullYear(),s.getMonth(),s.getDate(),23,59,59,999);y.push({path:"/alarms",query:{startTime:D(e),endTime:D(n)}})},rt=()=>{const s=new Date,e=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0),n=new Date(s.getFullYear(),s.getMonth(),s.getDate(),23,59,59,999);y.push({path:"/alarms",query:{startTime:D(e),endTime:D(n),status:0}})},dt=s=>{y.push(`/devices/${s}`)},ct=s=>{y.push({path:"/alarms",query:{alarmId:s}})},ut=async()=>{await X(),await j(),await J(),await A(),setTimeout(()=>{W(),et(),st()},300)};return gt(()=>{console.log("Overview 组件已挂载，开始加载数据");try{ut(),H=setInterval(()=>{X(),j(),J()},3e4)}catch(s){console.error("Overview 组件初始化失败:",s),Q.error("页面加载失败: "+(s.message||"未知错误"))}}),ft(()=>{H&&clearInterval(H),h==null||h.dispose(),g==null||g.dispose(),f==null||f.dispose(),window.removeEventListener("resize",()=>{h==null||h.resize(),g==null||g.resize(),f==null||f.resize()})}),(s,e)=>{const n=L("el-icon"),i=L("el-button"),r=L("el-button-group"),c=L("el-tag"),_=_t("loading");return u(),v("div",bt,[t("div",St,[t("div",{class:"stat-card stat-card-primary",onClick:E},[t("div",xt,[e[5]||(e[5]=t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},[t("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z",fill:"white"})])],-1)),o.value.deviceTrend!==0?(u(),v("div",Tt,[t("span",{class:$(o.value.deviceTrend>0?"trend-up":"trend-down")},l(o.value.deviceTrend>0?"↑":"↓")+" "+l(Math.abs(o.value.deviceTrend)),3)])):z("",!0)]),t("div",kt,[e[6]||(e[6]=t("div",{class:"stat-label"},"设备总数",-1)),t("div",Mt,l(C(o.value.totalDevices)),1),t("div",Lt,[t("span",$t,"在线 "+l(o.value.onlineDevices),1),t("span",At,"离线 "+l(o.value.offlineDevices),1)])])]),t("div",{class:"stat-card stat-card-success",onClick:e[0]||(e[0]=a=>E({status:"online"}))},[t("div",Nt,[e[7]||(e[7]=t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"}},[t("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"white"})])],-1)),o.value.onlineRate?(u(),v("div",Bt,[t("span",Rt,l(o.value.onlineRate)+"%",1)])):z("",!0)]),t("div",Vt,[e[8]||(e[8]=t("div",{class:"stat-label"},"在线设备",-1)),t("div",Ft,l(C(o.value.onlineDevices)),1),t("div",Ot,[t("span",Ht,"在线率 "+l(o.value.onlineRate||0)+"%",1)])])]),t("div",{class:"stat-card stat-card-warning",onClick:nt},[e[11]||(e[11]=t("div",{class:"stat-icon-wrapper"},[t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},[t("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z",fill:"white"})])])],-1)),t("div",Wt,[e[9]||(e[9]=t("div",{class:"stat-label"},"产品类型",-1)),t("div",Et,l(C(o.value.productCount||0)),1),e[10]||(e[10]=t("div",{class:"stat-detail"},[t("span",{style:{color:"#999"}},"已创建产品")],-1))])]),t("div",Ut,[t("div",Yt,[e[12]||(e[12]=t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},[t("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z",fill:"white"})])],-1)),o.value.dataTrend!==0?(u(),v("div",qt,[t("span",{class:$(o.value.dataTrend>0?"trend-up":"trend-down")},l(o.value.dataTrend>0?"↑":"↓")+" "+l(K(Math.abs(o.value.dataTrend))),3)])):z("",!0)]),t("div",Pt,[e[13]||(e[13]=t("div",{class:"stat-label"},"今日数据量",-1)),t("div",Gt,l(C(o.value.todayDataCount)),1),t("div",Xt,[t("span",jt,"较昨日 "+l(o.value.dataTrend>0?"+":"")+l(K(o.value.dataTrend)),1)])])]),t("div",{class:"stat-card stat-card-danger",onClick:e[1]||(e[1]=a=>lt())},[e[15]||(e[15]=t("div",{class:"stat-icon-wrapper"},[t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #f56c6c 0%, #ff8a80 100%)"}},[t("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z",fill:"white"})])])],-1)),t("div",Jt,[e[14]||(e[14]=t("div",{class:"stat-label"},"今日报警",-1)),t("div",Kt,l(C(o.value.todayAlarmCount||0)),1),t("div",Zt,[t("span",Qt,"严重 "+l(o.value.todayCriticalCount||0),1),t("span",It,"警告 "+l(o.value.todayWarningCount||0),1)])])]),t("div",{class:"stat-card stat-card-warning-alt",onClick:e[2]||(e[2]=a=>rt())},[e[18]||(e[18]=t("div",{class:"stat-icon-wrapper"},[t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #ff9800 0%, #ffb74d 100%)"}},[t("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",fill:"white"})])])],-1)),t("div",te,[e[16]||(e[16]=t("div",{class:"stat-label"},"今日未处理",-1)),t("div",ee,l(C(o.value.todayUnhandledCount||0)),1),e[17]||(e[17]=t("div",{class:"stat-detail"},[t("span",{style:{color:"#999"}},"待处理报警")],-1))])])]),t("div",se,[t("div",ae,[t("div",oe,[t("div",ne,[d(n,{class:"chart-icon",size:20},{default:p(()=>[d(w(mt))]),_:1}),e[19]||(e[19]=t("span",{class:"chart-title"},"数据上报趋势（最近24小时）",-1))]),t("div",ie,[d(r,null,{default:p(()=>[d(i,{type:x.value==="24h"?"primary":"",size:"small",onClick:e[3]||(e[3]=a=>{x.value="24h",W()})},{default:p(()=>[...e[20]||(e[20]=[S("24小时",-1)])]),_:1},8,["type"]),d(i,{type:x.value==="7d"?"primary":"",size:"small",onClick:e[4]||(e[4]=a=>{x.value="7d",W()})},{default:p(()=>[...e[21]||(e[21]=[S("7天",-1)])]),_:1},8,["type"])]),_:1})])]),Y(t("div",{ref_key:"trendChartRef",ref:N,class:"chart-container"},null,512),[[_,V.value]])]),t("div",le,[t("div",re,[t("div",de,[d(n,{class:"chart-icon",size:20},{default:p(()=>[d(w(wt))]),_:1}),e[22]||(e[22]=t("span",{class:"chart-title"},"产品分布",-1))])]),Y(t("div",{ref_key:"productChartRef",ref:B,class:"chart-container"},null,512),[[_,F.value]])])]),t("div",ce,[t("div",ue,[t("div",ve,[t("div",pe,[d(n,{class:"chart-icon",size:20},{default:p(()=>[d(w(yt))]),_:1}),e[23]||(e[23]=t("span",{class:"chart-title"},"设备状态分布",-1))])]),Y(t("div",{ref_key:"statusChartRef",ref:R,class:"chart-container"},null,512),[[_,O.value]])]),t("div",he,[t("div",ge,[t("div",fe,[d(n,{class:"chart-icon",size:20},{default:p(()=>[d(w(Ct))]),_:1}),e[24]||(e[24]=t("span",{class:"chart-title"},"设备分组统计",-1))])]),t("div",_e,[(u(!0),v(q,null,P(k.value,a=>(u(),v("div",{key:a.groupId,class:"group-stat-item"},[t("div",me,[t("span",we,l(a.groupName||"未分组"),1),t("span",ye,l(a.deviceCount)+" 台",1)]),t("div",Ce,[t("div",{class:"group-stat-bar-fill",style:Dt({width:ot(a.deviceCount)+"%"})},[t("div",De,[t("span",ze,"在线 "+l(a.onlineCount),1),t("span",be,"离线 "+l(a.offlineCount),1)])],4)])]))),128)),k.value.length===0?(u(),v("div",Se,[d(n,{class:"empty-icon",size:48},{default:p(()=>[d(w(I))]),_:1}),e[25]||(e[25]=t("p",null,"暂无分组数据",-1))])):z("",!0)])])]),t("div",xe,[t("div",Te,[t("div",ke,[t("div",Me,[d(n,{class:"card-icon",size:20},{default:p(()=>[d(w(tt))]),_:1}),e[26]||(e[26]=t("span",{class:"card-title"},"最近报警",-1))]),d(i,{type:"text",onClick:it},{default:p(()=>[...e[27]||(e[27]=[S("查看全部 →",-1)])]),_:1})]),t("div",Le,[(u(!0),v(q,null,P(M.value,a=>(u(),v("div",{key:a.id,class:$(["alarm-item",`alarm-level-${a.alarmLevel}`]),onClick:U=>ct(a.id)},[t("div",Ae,[t("div",Ne,[a.alarmLevel==="critical"?(u(),v("svg",Be,[...e[28]||(e[28]=[t("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z",fill:"currentColor"},null,-1)])])):a.alarmLevel==="warning"?(u(),v("svg",Re,[...e[29]||(e[29]=[t("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",fill:"currentColor"},null,-1)])])):(u(),v("svg",Ve,[...e[30]||(e[30]=[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z",fill:"currentColor"},null,-1)])]))])]),t("div",Fe,[t("div",Oe,l(a.deviceName||a.deviceCode),1),t("div",He,l(a.alarmMessage),1),t("div",We,l(Z(a.triggerTime)),1)]),t("div",Ee,[d(c,{type:a.status===0?"warning":"success",size:"small"},{default:p(()=>[S(l(a.status===0?"未处理":"已处理"),1)]),_:2},1032,["type"])])],10,$e))),128)),M.value.length===0?(u(),v("div",Ue,[d(n,{class:"empty-icon",size:48},{default:p(()=>[d(w(tt))]),_:1}),e[31]||(e[31]=t("p",null,"暂无报警数据",-1))])):z("",!0)])]),t("div",Ye,[t("div",qe,[t("div",Pe,[d(n,{class:"card-icon",size:20},{default:p(()=>[d(w(zt))]),_:1}),e[32]||(e[32]=t("span",{class:"card-title"},"最近活跃设备",-1))]),d(i,{type:"text",onClick:E},{default:p(()=>[...e[33]||(e[33]=[S("查看全部 →",-1)])]),_:1})]),t("div",Ge,[(u(!0),v(q,null,P(o.value.recentDevices,a=>(u(),v("div",{key:a.deviceCode,class:"device-item",onClick:U=>dt(a.deviceCode)},[t("div",je,[e[34]||(e[34]=t("div",{class:"device-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z",fill:"currentColor"})])],-1)),t("span",{class:$(a.status===1?"status-dot online":"status-dot offline")},null,2)]),t("div",Je,[t("div",Ke,l(a.deviceName),1),t("div",Ze,[t("span",null,l(a.productName),1),e[35]||(e[35]=t("span",{class:"separator"},"·",-1)),t("span",null,l(Z(a.lastOnlineTime)),1)])]),t("div",Qe,[d(c,{type:a.status===1?"success":"warning",size:"small"},{default:p(()=>[S(l(a.status===1?"在线":"离线"),1)]),_:2},1032,["type"])])],8,Xe))),128)),o.value.recentDevices.length===0?(u(),v("div",Ie,[d(n,{class:"empty-icon",size:48},{default:p(()=>[d(w(I))]),_:1}),e[36]||(e[36]=t("p",null,"暂无设备数据",-1))])):z("",!0)])])])])}}},os=vt(ts,[["__scopeId","data-v-a21048ae"]]);export{os as default};
