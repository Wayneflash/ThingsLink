import{_ as ye,b as N,c as j,v as Ve,d as A,y as _e,o as f,e as y,f as l,q as b,t as v,g as t,w as n,h as he,i as H,B as we,I as g,E as k,N as le,F as D,C as S,P as ke,z as L,A as ae,Q as se}from"./index-f4aa5fa2.js";import{g as te}from"./device-a3f7dfab.js";import{g as Ce,a as Ue}from"./product-23594921.js";import{g as Ae}from"./user-a8469921.js";import{c as T}from"./alarm-db674876.js";import{G as oe}from"./GroupSelector-ab4eb397.js";import"./group-31d5d02f.js";const Ee={class:"alarm-config-page"},Ie={class:"page-header"},xe={class:"stats-quick"},Me={class:"stat-item"},ze={class:"stat-item active"},Ne={class:"stat-item inactive"},Oe={class:"filter-bar"},je={class:"table-container"},De={class:"device-name-cell"},Se={class:"device-name-text"},$e={class:"device-code-text"},Be={key:0,class:"tag configured"},qe={key:1,class:"tag unconfigured"},Pe={key:0,class:"handler-user-text"},Le={key:1,class:"empty-text"},Te={class:"pagination-wrapper"},Fe={class:"dialog-body"},Ge={class:"info-section"},Je={class:"info-grid"},Ke={class:"info-item"},Qe={class:"info-value"},He={class:"info-item"},Re={class:"info-value code"},We={class:"info-item"},Xe={class:"info-value"},Ye={class:"info-item"},Ze={class:"info-value"},el={class:"form-section"},ll={class:"form-field"},al={class:"form-field"},sl={class:"switch-field"},tl={class:"form-field"},ol={class:"switch-field"},il={class:"form-field"},nl={class:"switch-field"},dl={class:"form-section"},rl={key:0,style:{"font-weight":"600",color:"#1d1d1f"}},fl={key:1},ml={key:0,class:"field-unit"},ul={key:1,class:"field-unit"},cl={class:"dialog-footer"},pl={class:"dialog-body"},bl={class:"form-section"},gl={class:"form-field"},vl={class:"form-field"},yl={class:"form-field"},Vl={class:"device-select-area"},_l={class:"select-header"},hl={class:"select-info"},wl={key:0,class:"warn-text"},kl={class:"device-list"},Cl={class:"device-details"},Ul={class:"device-title-row"},Al={class:"device-title-text"},El={class:"device-meta-text"},Il={class:"form-section"},xl={class:"form-field"},Ml={class:"form-field"},zl={class:"switch-field"},Nl={class:"form-field"},Ol={class:"switch-field"},jl={class:"form-field"},Dl={class:"switch-field"},Sl={class:"form-field"},$l={key:0,style:{"font-weight":"600",color:"#1d1d1f"}},Bl={key:1},ql={key:0,class:"field-unit"},Pl={key:1,class:"field-unit"},Ll={class:"dialog-footer"},Tl={__name:"AlarmThresholdConfig",setup(Fl){const F=N(!1),$=N([]),G=N([]),B=N([]),J=N([]),q=N([]),K=N({}),E=j({total:0,configured:0,unconfigured:0}),V=j({keyword:"",productId:null,groupId:null,configStatus:null,onlineStatus:null}),x=j({page:1,pageSize:20,total:0}),i=j({visible:!1,device:null,form:{level:"warning",conditions:[{metric:"",operator:">",threshold:0}],notifyUser:null,stackMode:!0,mailEnabled:!1,smsEnabled:!1,offlineAlarm:{enabled:!1,operator:">",threshold:5,unit:"min",level:"warning"}}}),s=j({visible:!1,productId:null,groupId:null,availableDevices:[],selectedDeviceIds:[],selectAll:!1,configuredCount:0,form:{level:"warning",conditions:[{metric:"",operator:">",threshold:0}],notifyUser:null,stackMode:!0,mailEnabled:!1,smsEnabled:!1,offlineAlarm:{enabled:!1,operator:">",threshold:5,unit:"min",level:"warning"}}}),z=async()=>{var o,e;F.value=!0;try{const m={page:x.page,pageSize:x.pageSize,keyword:V.keyword||void 0,productId:V.productId||void 0,groupId:V.groupId||void 0,status:V.onlineStatus!==null?V.onlineStatus:void 0},p=await te(m);if(p&&p.list){let d=p.list||[];d=d.map(r=>{if(r.alarmConfig)try{r.alarmConfigObj=JSON.parse(r.alarmConfig)}catch{r.alarmConfigObj=null}return r}),V.configStatus&&(d=d.filter(r=>V.configStatus==="configured"?r.alarmConfig:V.configStatus==="unconfigured"?!r.alarmConfig:!0)),$.value=d,x.total=p.total||0,E.total=p.total||0,E.configured=d.filter(r=>r.alarmConfig).length,E.unconfigured=d.filter(r=>!r.alarmConfig).length}else $.value=[],x.total=0,E.total=0,E.configured=0,E.unconfigured=0}catch(m){console.error("åŠ è½½è®¾å¤‡åˆ—è¡¨å¤±è´¥:",m);const p=((e=(o=m==null?void 0:m.response)==null?void 0:o.data)==null?void 0:e.message)||(m==null?void 0:m.message)||"åŠ è½½è®¾å¤‡åˆ—è¡¨å¤±è´¥";k.error(p),$.value=[],x.total=0,E.total=0,E.configured=0,E.unconfigured=0}finally{F.value=!1}},ie=async()=>{try{const o=await Ce({});o&&(G.value=o.list||(Array.isArray(o)?o:[]))}catch(o){console.error("åŠ è½½äº§å“åˆ—è¡¨å¤±è´¥:",o)}},ne=async()=>{try{const o=await Ae({page:1,pageSize:1e3});o&&o.list&&(B.value=o.list||[])}catch(o){console.error("åŠ è½½ç”¨æˆ·åˆ—è¡¨å¤±è´¥:",o)}},R=async o=>{if(!o)return[];if(K.value[o])return K.value[o];try{const e=await Ue(o);if(e){const m=Array.isArray(e)?e:[];return K.value[o]=m,m}return[]}catch(e){return console.error("åŠ è½½ç‰©æ¨¡å‹å±æ€§å¤±è´¥:",e),[]}},de=async o=>{i.device=o,i.visible=!0;const e=await R(o.productId);J.value=[{addr:"__offline__",attrName:"ç¦»çº¿æŠ¥è­¦"},...e];const m={};e.forEach(p=>{m[p.addr]={enabled:!1,operator:">",threshold:0,level:"warning"}}),o.alarmConfigObj&&o.alarmConfigObj.metrics?(Object.keys(o.alarmConfigObj.metrics).forEach(p=>{m[p]&&(m[p]={...o.alarmConfigObj.metrics[p]})}),i.form={notifyUser:o.alarmConfigObj.notifyUser||null,stackMode:o.alarmConfigObj.stackMode!==!1,mailEnabled:o.alarmConfigObj.mailEnabled||!1,smsEnabled:o.alarmConfigObj.smsEnabled||!1,metrics:m,offlineAlarm:o.alarmConfigObj.offlineAlarm||{enabled:!1,operator:">",threshold:5,unit:"min",level:"warning"}}):o.alarmConfigObj&&o.alarmConfigObj.conditions?(o.alarmConfigObj.conditions.forEach(p=>{m[p.metric]&&(m[p.metric]={enabled:!0,operator:p.operator,threshold:p.threshold,level:o.alarmConfigObj.level||"warning"})}),i.form={notifyUser:o.alarmConfigObj.notifyUsers&&o.alarmConfigObj.notifyUsers.length>0?o.alarmConfigObj.notifyUsers[0]:null,stackMode:o.alarmConfigObj.stackMode!==!1,mailEnabled:o.alarmConfigObj.mailEnabled||!1,smsEnabled:o.alarmConfigObj.smsEnabled||!1,metrics:m,offlineAlarm:{enabled:!1,operator:">",threshold:5,unit:"min",level:"warning"}}):i.form={notifyUser:null,stackMode:!0,mailEnabled:!1,smsEnabled:!1,metrics:m,offlineAlarm:{enabled:!1,operator:">",threshold:5,unit:"min",level:"warning"}}},re=async()=>{var e,m,p,d;const o=Object.entries(i.form.metrics).filter(([r,_])=>_.enabled);if(o.length===0)try{await T({deviceId:i.device.id,alarmConfig:{notifyUser:i.form.notifyUser||null,stackMode:i.form.stackMode,metrics:i.form.metrics},enabled:!1}),k.success("å·²æ’¤é”€è¯¥è®¾å¤‡çš„æ‰€æœ‰æŠ¥è­¦é…ç½®"),i.visible=!1,z();return}catch(r){console.error("é…ç½®å¤±è´¥:",r),k.error("é…ç½®å¤±è´¥ï¼š"+(((m=(e=r.response)==null?void 0:e.data)==null?void 0:m.message)||r.message));return}if(!i.form.notifyUser){k.warning("å¯ç”¨ç›‘æ§æ—¶å¿…é¡»é€‰æ‹©å¤„ç†äºº");return}for(const[r,_]of o){if(!_.operator||_.threshold===null||_.threshold===void 0){k.warning(`ç›‘æ§å±æ€§ "${W(r)}" çš„é…ç½®ä¸å®Œæ•´ï¼Œè¯·æ£€æŸ¥è¿ç®—ç¬¦å’Œé˜ˆå€¼`);return}if(!_.level){k.warning(`ç›‘æ§å±æ€§ "${W(r)}" æœªè®¾ç½®æŠ¥è­¦çº§åˆ«`);return}}try{await T({deviceId:i.device.id,alarmConfig:{notifyUser:i.form.notifyUser,stackMode:i.form.stackMode,mailEnabled:i.form.mailEnabled,smsEnabled:i.form.smsEnabled,metrics:i.form.metrics,offlineAlarm:i.form.offlineAlarm},enabled:!0}),k.success("é…ç½®æˆåŠŸ"),i.visible=!1,z()}catch(r){console.error("é…ç½®å¤±è´¥:",r),k.error("é…ç½®å¤±è´¥ï¼š"+(((d=(p=r.response)==null?void 0:p.data)==null?void 0:d.message)||r.message))}},W=o=>{const e=J.value.find(m=>m.addr===o);return e?e.attrName:o},fe=()=>{s.visible=!0,s.productId=null,s.groupId=null,s.availableDevices=[],s.selectedDeviceIds=[],s.selectAll=!1,s.configuredCount=0,s.form={notifyUser:null,stackMode:!0,mailEnabled:!1,smsEnabled:!1,metrics:{},offlineAlarm:{enabled:!1,operator:">",threshold:5,unit:"min",level:"warning"}}},me=async()=>{if(s.productId){const o=await R(s.productId);q.value=[{addr:"__offline__",attrName:"ç¦»çº¿æŠ¥è­¦"},...o];const e={};o.forEach(m=>{e[m.addr]={enabled:!1,operator:">",threshold:0,level:"warning"}}),s.form.metrics=e,await X()}},X=async()=>{if(s.productId)try{const o={page:1,pageSize:1e4,productId:s.productId,groupId:s.groupId||void 0},e=await te(o);e&&e.list&&(s.availableDevices=(e.list||[]).map(m=>{if(m.alarmConfig)try{m.alarmConfigObj=JSON.parse(m.alarmConfig)}catch{}return{...m,selected:!1}}),Q())}catch(o){console.error("åŠ è½½è®¾å¤‡å¤±è´¥:",o)}},ue=()=>{s.availableDevices.forEach(o=>{o.selected=s.selectAll}),Q()},Q=()=>{s.selectedDeviceIds=s.availableDevices.filter(o=>o.selected).map(o=>o.id),s.configuredCount=s.availableDevices.filter(o=>o.selected&&o.alarmConfig).length,s.selectAll=s.selectedDeviceIds.length===s.availableDevices.length&&s.availableDevices.length>0},ce=async()=>{var e,m,p,d,r,_;if(s.selectedDeviceIds.length===0){k.warning("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªè®¾å¤‡");return}const o=Object.entries(s.form.metrics).filter(([u,M])=>M.enabled);if(o.length===0)try{await se.confirm(`ç¡®è®¤æ’¤é”€ ${s.selectedDeviceIds.length} å°è®¾å¤‡çš„æ‰€æœ‰æŠ¥è­¦é…ç½®ï¼Ÿ`,"ç¡®è®¤æ“ä½œ",{type:"warning"}),await T({deviceIds:s.selectedDeviceIds,alarmConfig:{notifyUser:s.form.notifyUser||null,stackMode:s.form.stackMode,metrics:s.form.metrics},enabled:!1}),k.success(`å·²æ’¤é”€ ${s.selectedDeviceIds.length} å°è®¾å¤‡çš„æŠ¥è­¦é…ç½®`),s.visible=!1,z();return}catch(u){u!=="cancel"&&(console.error("é…ç½®å¤±è´¥:",u),k.error("é…ç½®å¤±è´¥ï¼š"+(((m=(e=u.response)==null?void 0:e.data)==null?void 0:m.message)||u.message)));return}if(!s.form.notifyUser){k.warning("å¯ç”¨ç›‘æ§æ—¶å¿…é¡»é€‰æ‹©å¤„ç†äºº");return}for(const[u,M]of o){if(!M.operator||M.threshold===null||M.threshold===void 0){const O=((p=q.value.find(U=>U.addr===u))==null?void 0:p.attrName)||u;k.warning(`ç›‘æ§å±æ€§ "${O}" çš„é…ç½®ä¸å®Œæ•´ï¼Œè¯·æ£€æŸ¥è¿ç®—ç¬¦å’Œé˜ˆå€¼`);return}if(!M.level){const O=((d=q.value.find(U=>U.addr===u))==null?void 0:d.attrName)||u;k.warning(`ç›‘æ§å±æ€§ "${O}" æœªè®¾ç½®æŠ¥è­¦çº§åˆ«`);return}}try{await se.confirm(`ç¡®è®¤ä¸º ${s.selectedDeviceIds.length} å°è®¾å¤‡æ‰¹é‡é…ç½®æŠ¥è­¦é˜ˆå€¼ï¼Ÿ

æ³¨æ„ï¼šå·²é…ç½®è®¾å¤‡çš„åŸæœ‰é˜ˆå€¼å°†è¢«è¦†ç›–ï¼`,"ç¡®è®¤æ“ä½œ",{type:"warning"}),await T({deviceIds:s.selectedDeviceIds,alarmConfig:{notifyUser:s.form.notifyUser,stackMode:s.form.stackMode,mailEnabled:s.form.mailEnabled,smsEnabled:s.form.smsEnabled,metrics:s.form.metrics,offlineAlarm:s.form.offlineAlarm},enabled:!0}),k.success("æ‰¹é‡é…ç½®æˆåŠŸ"),s.visible=!1,z()}catch(u){u!=="cancel"&&(console.error("æ‰¹é‡é…ç½®å¤±è´¥:",u),k.error("é…ç½®å¤±è´¥ï¼š"+(((_=(r=u.response)==null?void 0:r.data)==null?void 0:_.message)||u.message)))}},pe=o=>{const e=B.value.find(m=>m.id===o);return e?e.realName||e.username:"-"};return Ve(()=>{z(),ie(),ne()}),(o,e)=>{const m=A("el-icon"),p=A("el-input"),d=A("el-option"),r=A("el-select"),_=A("el-button"),u=A("el-table-column"),M=A("el-table"),O=A("el-pagination"),U=A("el-switch"),P=A("el-input-number"),Y=A("el-dialog"),be=A("el-alert"),Z=A("el-checkbox"),ge=A("el-tag"),ve=_e("loading");return f(),y("div",Ee,[l("div",Ie,[e[33]||(e[33]=l("h2",{class:"page-title"},"âš™ï¸ è®¾å¤‡æŠ¥è­¦é˜ˆå€¼é…ç½®",-1)),l("div",xe,[l("span",Me,[e[30]||(e[30]=b("æ€»è®¾å¤‡ ",-1)),l("strong",null,v(E.total),1)]),l("span",ze,[e[31]||(e[31]=b("å·²é…ç½® ",-1)),l("strong",null,v(E.configured),1)]),l("span",Ne,[e[32]||(e[32]=b("æœªé…ç½® ",-1)),l("strong",null,v(E.unconfigured),1)])])]),l("div",Oe,[t(p,{modelValue:V.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>V.keyword=a),placeholder:"æœç´¢è®¾å¤‡åç§°/è®¾å¤‡ç¼–ç ",class:"search-input",clearable:"",onKeyup:he(z,["enter"])},{prefix:n(()=>[t(m,null,{default:n(()=>[t(H(le))]),_:1})]),_:1},8,["modelValue"]),t(r,{modelValue:V.productId,"onUpdate:modelValue":e[1]||(e[1]=a=>V.productId=a),placeholder:"äº§å“å‹å·",clearable:"",class:"filter-select",style:{width:"180px"}},{default:n(()=>[(f(!0),y(D,null,S(G.value,a=>(f(),g(d,{key:a.id,label:a.productName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(oe,{modelValue:V.groupId,"onUpdate:modelValue":e[2]||(e[2]=a=>V.groupId=a),placeholder:"è®¾å¤‡åˆ†ç»„",clearable:"",class:"filter-select",style:{width:"180px"}},null,8,["modelValue"]),t(r,{modelValue:V.configStatus,"onUpdate:modelValue":e[3]||(e[3]=a=>V.configStatus=a),placeholder:"é…ç½®çŠ¶æ€",clearable:"",class:"filter-select",style:{width:"140px"}},{default:n(()=>[t(d,{label:"å·²é…ç½®",value:"configured"}),t(d,{label:"æœªé…ç½®",value:"unconfigured"})]),_:1},8,["modelValue"]),t(r,{modelValue:V.onlineStatus,"onUpdate:modelValue":e[4]||(e[4]=a=>V.onlineStatus=a),placeholder:"åœ¨çº¿çŠ¶æ€",clearable:"",class:"filter-select",style:{width:"140px"}},{default:n(()=>[t(d,{label:"åœ¨çº¿",value:1}),t(d,{label:"ç¦»çº¿",value:0})]),_:1},8,["modelValue"]),t(_,{type:"primary",onClick:z,icon:H(le),style:{"margin-left":"8px"}},{default:n(()=>[...e[34]||(e[34]=[b("æŸ¥è¯¢",-1)])]),_:1},8,["icon"]),t(_,{type:"primary",onClick:fe,icon:H(ke)},{default:n(()=>[...e[35]||(e[35]=[b("æ‰¹é‡é…ç½®",-1)])]),_:1},8,["icon"])]),l("div",je,[we((f(),g(M,{data:$.value,stripe:"",style:{width:"100%"}},{default:n(()=>[t(u,{prop:"deviceName",label:"è®¾å¤‡åç§°","min-width":"130","show-overflow-tooltip":""},{default:n(({row:a})=>[l("div",De,[l("span",{class:L(["status-dot",a.status===1?"online":"offline"])},null,2),l("span",Se,v(a.deviceName),1)])]),_:1}),t(u,{prop:"deviceCode",label:"è®¾å¤‡ç¼–ç ","min-width":"130","show-overflow-tooltip":""},{default:n(({row:a})=>[l("span",$e,v(a.deviceCode),1)]),_:1}),t(u,{label:"åœ¨çº¿çŠ¶æ€",width:"90",align:"center"},{default:n(({row:a})=>[l("span",{class:L(["status-text",a.status===1?"status-online":"status-offline"])},v(a.status===1?"åœ¨çº¿":"ç¦»çº¿"),3)]),_:1}),t(u,{prop:"productName",label:"äº§å“åç§°","min-width":"140","show-overflow-tooltip":""}),t(u,{prop:"groupName",label:"æ‰€å±åˆ†ç»„","min-width":"110","show-overflow-tooltip":""}),t(u,{label:"é…ç½®çŠ¶æ€",width:"100",align:"center"},{default:n(({row:a})=>[a.alarmConfig?(f(),y("span",Be,"âœ“ å·²é…ç½®")):(f(),y("span",qe,"âœ— æœªé…ç½®"))]),_:1}),t(u,{label:"å¤„ç†äºº",width:"100","show-overflow-tooltip":""},{default:n(({row:a})=>[a.alarmConfigObj&&a.alarmConfigObj.notifyUser?(f(),y("span",Pe,v(pe(a.alarmConfigObj.notifyUser)),1)):(f(),y("span",Le,"-"))]),_:1}),t(u,{label:"æ“ä½œ",width:"90",fixed:"right"},{default:n(({row:a})=>[t(_,{type:"primary",link:"",onClick:w=>de(a)},{default:n(()=>[...e[36]||(e[36]=[b("é…ç½®",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ve,F.value]])]),l("div",Te,[t(O,{"current-page":x.page,"onUpdate:currentPage":e[5]||(e[5]=a=>x.page=a),"page-size":x.pageSize,"onUpdate:pageSize":e[6]||(e[6]=a=>x.pageSize=a),total:x.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:z,onCurrentChange:z},null,8,["current-page","page-size","total"])]),t(Y,{modelValue:i.visible,"onUpdate:modelValue":e[16]||(e[16]=a=>i.visible=a),title:"é˜ˆå€¼é…ç½®",width:"900px","close-on-click-modal":!1,top:"3vh",class:"config-dialog"},{footer:n(()=>[l("div",cl,[t(_,{onClick:e[15]||(e[15]=a=>i.visible=!1)},{default:n(()=>[...e[51]||(e[51]=[b("å–æ¶ˆ",-1)])]),_:1}),t(_,{type:"primary",onClick:re},{default:n(()=>[...e[52]||(e[52]=[b("ä¿å­˜",-1)])]),_:1})])]),default:n(()=>{var a,w,h,ee;return[l("div",Fe,[l("div",Ge,[e[41]||(e[41]=l("h3",{class:"section-title"},"è®¾å¤‡ä¿¡æ¯",-1)),l("div",Je,[l("div",Ke,[e[37]||(e[37]=l("span",{class:"info-label"},"è®¾å¤‡åç§°",-1)),l("span",Qe,v((a=i.device)==null?void 0:a.deviceName),1)]),l("div",He,[e[38]||(e[38]=l("span",{class:"info-label"},"è®¾å¤‡ç¼–ç ",-1)),l("code",Re,v((w=i.device)==null?void 0:w.deviceCode),1)]),l("div",We,[e[39]||(e[39]=l("span",{class:"info-label"},"äº§å“å‹å·",-1)),l("span",Xe,v((h=i.device)==null?void 0:h.productName),1)]),l("div",Ye,[e[40]||(e[40]=l("span",{class:"info-label"},"æ‰€å±åˆ†ç»„",-1)),l("span",Ze,v((ee=i.device)==null?void 0:ee.groupName),1)])])]),l("div",el,[e[49]||(e[49]=l("h3",{class:"section-title"},"å…¨å±€é…ç½®",-1)),l("div",ll,[e[42]||(e[42]=l("label",{class:"field-label"},[b(" å¤„ç†äºº "),l("span",{class:"required"},"*")],-1)),t(r,{modelValue:i.form.notifyUser,"onUpdate:modelValue":e[7]||(e[7]=c=>i.form.notifyUser=c),placeholder:"è¯·é€‰æ‹©å¤„ç†äºº",class:"field-select-full"},{default:n(()=>[(f(!0),y(D,null,S(B.value,c=>(f(),g(d,{key:c.id,label:c.realName||c.username,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l("div",al,[e[44]||(e[44]=l("label",{class:"field-label"},"æŠ¥è­¦å †å ",-1)),l("div",sl,[t(U,{modelValue:i.form.stackMode,"onUpdate:modelValue":e[8]||(e[8]=c=>i.form.stackMode=c)},null,8,["modelValue"]),e[43]||(e[43]=l("span",{class:"switch-label"},"å¼€å¯åï¼Œæ¢å¤å‰ä¸ä¼šé‡å¤æŠ¥è­¦",-1))])]),l("div",tl,[e[46]||(e[46]=l("label",{class:"field-label"},"é‚®ä»¶é€šçŸ¥",-1)),l("div",ol,[t(U,{modelValue:i.form.mailEnabled,"onUpdate:modelValue":e[9]||(e[9]=c=>i.form.mailEnabled=c)},null,8,["modelValue"]),e[45]||(e[45]=l("span",{class:"switch-label"},"å¼€å¯åï¼ŒæŠ¥è­¦æ—¶å°†å‘é€é‚®ä»¶é€šçŸ¥å¤„ç†äºº",-1))])]),l("div",il,[e[48]||(e[48]=l("label",{class:"field-label"},"çŸ­ä¿¡é€šçŸ¥",-1)),l("div",nl,[t(U,{modelValue:i.form.smsEnabled,"onUpdate:modelValue":e[10]||(e[10]=c=>i.form.smsEnabled=c)},null,8,["modelValue"]),e[47]||(e[47]=l("span",{class:"switch-label"},"å¼€å¯åï¼ŒæŠ¥è­¦æ—¶å°†å‘é€çŸ­ä¿¡é€šçŸ¥å¤„ç†äºº",-1))])])]),l("div",dl,[e[50]||(e[50]=l("h3",{class:"section-title"},"ç‰©æ¨¡å‹ç›‘æ§é…ç½®",-1)),t(M,{data:J.value,border:"",style:{width:"100%"},"max-height":"300px"},{default:n(()=>[t(u,{label:"å±æ€§åç§°",width:"120"},{default:n(({row:c,$index:I})=>[I===0?(f(),y("span",rl,"ç¦»çº¿æŠ¥è­¦")):(f(),y("span",fl,v(c.attrName),1))]),_:1}),t(u,{label:"å¯ç”¨",width:"70",align:"center"},{default:n(({row:c,$index:I})=>[I===0?(f(),g(U,{key:0,modelValue:i.form.offlineAlarm.enabled,"onUpdate:modelValue":e[11]||(e[11]=C=>i.form.offlineAlarm.enabled=C),size:"small"},null,8,["modelValue"])):(f(),g(U,{key:1,modelValue:i.form.metrics[c.addr].enabled,"onUpdate:modelValue":C=>i.form.metrics[c.addr].enabled=C,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),t(u,{label:"è¿ç®—ç¬¦",width:"100"},{default:n(({row:c,$index:I})=>[I===0?(f(),g(r,{key:0,modelValue:i.form.offlineAlarm.operator,"onUpdate:modelValue":e[12]||(e[12]=C=>i.form.offlineAlarm.operator=C),disabled:!i.form.offlineAlarm.enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:">",value:">"})]),_:1},8,["modelValue","disabled"])):(f(),g(r,{key:1,modelValue:i.form.metrics[c.addr].operator,"onUpdate:modelValue":C=>i.form.metrics[c.addr].operator=C,disabled:!i.form.metrics[c.addr].enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:">",value:">"}),t(d,{label:"<",value:"<"}),t(d,{label:"=",value:"="})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]))]),_:1}),t(u,{label:"é˜ˆå€¼",width:"140"},{default:n(({row:c,$index:I})=>[I===0?(f(),g(P,{key:0,modelValue:i.form.offlineAlarm.threshold,"onUpdate:modelValue":e[13]||(e[13]=C=>i.form.offlineAlarm.threshold=C),disabled:!i.form.offlineAlarm.enabled,min:1,precision:0,step:1,size:"small",style:{width:"100%"}},null,8,["modelValue","disabled"])):(f(),g(P,{key:1,modelValue:i.form.metrics[c.addr].threshold,"onUpdate:modelValue":C=>i.form.metrics[c.addr].threshold=C,disabled:!i.form.metrics[c.addr].enabled,precision:2,step:.1,size:"small",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","disabled"]))]),_:1}),t(u,{label:"å•ä½",width:"80",align:"center"},{default:n(({row:c,$index:I})=>[I===0?(f(),y("span",ml,"min")):(f(),y("span",ul,v(c.unit||"-"),1))]),_:1}),t(u,{label:"æŠ¥è­¦çº§åˆ«",width:"140"},{default:n(({row:c,$index:I})=>[I===0?(f(),g(r,{key:0,modelValue:i.form.offlineAlarm.level,"onUpdate:modelValue":e[14]||(e[14]=C=>i.form.offlineAlarm.level=C),disabled:!i.form.offlineAlarm.enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:"ğŸ”´ ä¸¥é‡",value:"critical"}),t(d,{label:"ğŸŸ¡ è­¦å‘Š",value:"warning"}),t(d,{label:"ğŸ”µ æç¤º",value:"info"})]),_:1},8,["modelValue","disabled"])):(f(),g(r,{key:1,modelValue:i.form.metrics[c.addr].level,"onUpdate:modelValue":C=>i.form.metrics[c.addr].level=C,disabled:!i.form.metrics[c.addr].enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:"ğŸ”´ ä¸¥é‡",value:"critical"}),t(d,{label:"ğŸŸ¡ è­¦å‘Š",value:"warning"}),t(d,{label:"ğŸ”µ æç¤º",value:"info"})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]))]),_:1})]),_:1},8,["data"])])])]}),_:1},8,["modelValue"]),t(Y,{modelValue:s.visible,"onUpdate:modelValue":e[29]||(e[29]=a=>s.visible=a),title:"æ‰¹é‡é…ç½®",width:"1100px","close-on-click-modal":!1,top:"2vh",class:"batch-dialog"},{footer:n(()=>[l("div",Ll,[t(_,{onClick:e[28]||(e[28]=a=>s.visible=!1)},{default:n(()=>[...e[73]||(e[73]=[b("å–æ¶ˆ",-1)])]),_:1}),t(_,{type:"primary",onClick:ce},{default:n(()=>[...e[74]||(e[74]=[b("ç¡®è®¤é…ç½®",-1)])]),_:1})])]),default:n(()=>[l("div",pl,[t(be,{type:"warning",closable:!1,class:"warning-box"},{title:n(()=>[...e[53]||(e[53]=[l("strong",null,"é‡è¦æç¤º",-1),l("div",{class:"alert-desc"},[b(" æ‰¹é‡é…ç½®å°†"),l("strong",null,"è¦†ç›–"),b("å·²é€‰è®¾å¤‡çš„åŸæœ‰é…ç½®ï¼Œä»¥æœ¬æ¬¡è®¾ç½®ä¸ºå‡†ã€‚å·²é…ç½®è®¾å¤‡çš„æ—§é˜ˆå€¼å°†å¤±æ•ˆã€‚ ")],-1)])]),_:1}),l("div",bl,[l("div",gl,[e[54]||(e[54]=l("label",{class:"field-label"},[b(" é€‰æ‹©äº§å“ "),l("span",{class:"required"},"*")],-1)),t(r,{modelValue:s.productId,"onUpdate:modelValue":e[17]||(e[17]=a=>s.productId=a),placeholder:"è¯·å…ˆé€‰æ‹©äº§å“å‹å·",onChange:me,class:"field-select-full"},{default:n(()=>[(f(!0),y(D,null,S(G.value,a=>(f(),g(d,{key:a.id,label:a.productName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[55]||(e[55]=l("div",{class:"field-hint"},"é€‰æ‹©äº§å“åï¼Œç›‘æ§é…ç½®å°†æ ¹æ®è¯¥äº§å“ç‰©æ¨¡å‹åŠ¨æ€åŠ è½½",-1))]),l("div",vl,[e[56]||(e[56]=l("label",{class:"field-label"},"è®¾å¤‡åˆ†ç»„",-1)),t(oe,{modelValue:s.groupId,"onUpdate:modelValue":e[18]||(e[18]=a=>s.groupId=a),placeholder:"å…¨éƒ¨åˆ†ç»„",clearable:"",onChange:X,class:"field-select-full"},null,8,["modelValue"]),e[57]||(e[57]=l("div",{class:"field-hint"},"ç­›é€‰è¯¥äº§å“ä¸‹æŒ‡å®šåˆ†ç»„çš„è®¾å¤‡",-1))]),l("div",yl,[e[62]||(e[62]=l("label",{class:"field-label"},[b(" é€‰æ‹©è®¾å¤‡ "),l("span",{class:"required"},"*")],-1)),l("div",Vl,[l("div",_l,[t(Z,{modelValue:s.selectAll,"onUpdate:modelValue":e[19]||(e[19]=a=>s.selectAll=a),onChange:ue},{default:n(()=>[...e[58]||(e[58]=[b(" å…¨é€‰/å–æ¶ˆå…¨é€‰ ",-1)])]),_:1},8,["modelValue"]),l("span",hl,[e[59]||(e[59]=b(" å·²é€‰æ‹© ",-1)),l("strong",null,v(s.selectedDeviceIds.length),1),e[60]||(e[60]=b(" å°è®¾å¤‡ ",-1)),s.configuredCount>0?(f(),y("span",wl," ï¼ˆå…¶ä¸­ "+v(s.configuredCount)+" å°å·²é…ç½®ï¼‰ ",1)):ae("",!0)])]),l("div",kl,[(f(!0),y(D,null,S(s.availableDevices,a=>(f(),y("div",{key:a.id,class:L(["device-item",{"is-selected":a.selected}])},[t(Z,{modelValue:a.selected,"onUpdate:modelValue":w=>a.selected=w,onChange:Q},null,8,["modelValue","onUpdate:modelValue"]),l("div",Cl,[l("div",Ul,[l("span",Al,v(a.deviceName),1),a.alarmConfig?(f(),g(ge,{key:0,type:"success",size:"small"},{default:n(()=>[...e[61]||(e[61]=[b("å·²é…ç½®",-1)])]),_:1})):ae("",!0)]),l("div",El,[b(v(a.deviceCode)+" | "+v(a.groupName||"æœªåˆ†ç»„")+" | ",1),l("span",{class:L(a.status===1?"text-success":"text-gray")},v(a.status===1?"åœ¨çº¿":"ç¦»çº¿"),3)])])],2))),128))])])])]),e[72]||(e[72]=l("div",{class:"divider-line"},null,-1)),l("div",Il,[e[71]||(e[71]=l("h3",{class:"section-title"},"ç»Ÿä¸€é…ç½®",-1)),l("div",xl,[e[63]||(e[63]=l("label",{class:"field-label"},[b(" å¤„ç†äºº "),l("span",{class:"required"},"*")],-1)),t(r,{modelValue:s.form.notifyUser,"onUpdate:modelValue":e[20]||(e[20]=a=>s.form.notifyUser=a),placeholder:"è¯·é€‰æ‹©å¤„ç†äºº",class:"field-select-full"},{default:n(()=>[(f(!0),y(D,null,S(B.value,a=>(f(),g(d,{key:a.id,label:a.realName||a.username,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l("div",Ml,[e[65]||(e[65]=l("label",{class:"field-label"},"æŠ¥è­¦å †å ",-1)),l("div",zl,[t(U,{modelValue:s.form.stackMode,"onUpdate:modelValue":e[21]||(e[21]=a=>s.form.stackMode=a)},null,8,["modelValue"]),e[64]||(e[64]=l("span",{class:"switch-label"},"å¼€å¯åï¼Œæ¢å¤å‰ä¸ä¼šé‡å¤æŠ¥è­¦",-1))])]),l("div",Nl,[e[67]||(e[67]=l("label",{class:"field-label"},"é‚®ä»¶é€šçŸ¥",-1)),l("div",Ol,[t(U,{modelValue:s.form.mailEnabled,"onUpdate:modelValue":e[22]||(e[22]=a=>s.form.mailEnabled=a)},null,8,["modelValue"]),e[66]||(e[66]=l("span",{class:"switch-label"},"å¼€å¯åï¼ŒæŠ¥è­¦æ—¶å°†å‘é€é‚®ä»¶é€šçŸ¥å¤„ç†äºº",-1))])]),l("div",jl,[e[69]||(e[69]=l("label",{class:"field-label"},"çŸ­ä¿¡é€šçŸ¥",-1)),l("div",Dl,[t(U,{modelValue:s.form.smsEnabled,"onUpdate:modelValue":e[23]||(e[23]=a=>s.form.smsEnabled=a)},null,8,["modelValue"]),e[68]||(e[68]=l("span",{class:"switch-label"},"å¼€å¯åï¼ŒæŠ¥è­¦æ—¶å°†å‘é€çŸ­ä¿¡é€šçŸ¥å¤„ç†äºº",-1))])]),l("div",Sl,[e[70]||(e[70]=l("label",{class:"field-label"},[b(" ç‰©æ¨¡å‹ç›‘æ§é…ç½® "),l("span",{class:"required"},"*")],-1)),t(M,{data:q.value,border:"",style:{width:"100%"},"max-height":"300px"},{default:n(()=>[t(u,{label:"å±æ€§åç§°",width:"120"},{default:n(({row:a,$index:w})=>[w===0?(f(),y("span",$l,"ç¦»çº¿æŠ¥è­¦")):(f(),y("span",Bl,v(a.attrName),1))]),_:1}),t(u,{label:"å¯ç”¨",width:"70",align:"center"},{default:n(({row:a,$index:w})=>[w===0?(f(),g(U,{key:0,modelValue:s.form.offlineAlarm.enabled,"onUpdate:modelValue":e[24]||(e[24]=h=>s.form.offlineAlarm.enabled=h),size:"small"},null,8,["modelValue"])):(f(),g(U,{key:1,modelValue:s.form.metrics[a.addr].enabled,"onUpdate:modelValue":h=>s.form.metrics[a.addr].enabled=h,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),t(u,{label:"è¿ç®—ç¬¦",width:"100"},{default:n(({row:a,$index:w})=>[w===0?(f(),g(r,{key:0,modelValue:s.form.offlineAlarm.operator,"onUpdate:modelValue":e[25]||(e[25]=h=>s.form.offlineAlarm.operator=h),disabled:!s.form.offlineAlarm.enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:">",value:">"})]),_:1},8,["modelValue","disabled"])):(f(),g(r,{key:1,modelValue:s.form.metrics[a.addr].operator,"onUpdate:modelValue":h=>s.form.metrics[a.addr].operator=h,disabled:!s.form.metrics[a.addr].enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:">",value:">"}),t(d,{label:"<",value:"<"}),t(d,{label:"=",value:"="})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]))]),_:1}),t(u,{label:"é˜ˆå€¼",width:"140"},{default:n(({row:a,$index:w})=>[w===0?(f(),g(P,{key:0,modelValue:s.form.offlineAlarm.threshold,"onUpdate:modelValue":e[26]||(e[26]=h=>s.form.offlineAlarm.threshold=h),disabled:!s.form.offlineAlarm.enabled,min:1,precision:0,step:1,size:"small",style:{width:"100%"}},null,8,["modelValue","disabled"])):(f(),g(P,{key:1,modelValue:s.form.metrics[a.addr].threshold,"onUpdate:modelValue":h=>s.form.metrics[a.addr].threshold=h,disabled:!s.form.metrics[a.addr].enabled,precision:2,step:.1,size:"small",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","disabled"]))]),_:1}),t(u,{label:"å•ä½",width:"80",align:"center"},{default:n(({row:a,$index:w})=>[w===0?(f(),y("span",ql,"min")):(f(),y("span",Pl,v(a.unit||"-"),1))]),_:1}),t(u,{label:"æŠ¥è­¦çº§åˆ«",width:"140"},{default:n(({row:a,$index:w})=>[w===0?(f(),g(r,{key:0,modelValue:s.form.offlineAlarm.level,"onUpdate:modelValue":e[27]||(e[27]=h=>s.form.offlineAlarm.level=h),disabled:!s.form.offlineAlarm.enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:"ğŸ”´ ä¸¥é‡",value:"critical"}),t(d,{label:"ğŸŸ¡ è­¦å‘Š",value:"warning"}),t(d,{label:"ğŸ”µ æç¤º",value:"info"})]),_:1},8,["modelValue","disabled"])):(f(),g(r,{key:1,modelValue:s.form.metrics[a.addr].level,"onUpdate:modelValue":h=>s.form.metrics[a.addr].level=h,disabled:!s.form.metrics[a.addr].enabled,size:"small",style:{width:"100%"}},{default:n(()=>[t(d,{label:"ğŸ”´ ä¸¥é‡",value:"critical"}),t(d,{label:"ğŸŸ¡ è­¦å‘Š",value:"warning"}),t(d,{label:"ğŸ”µ æç¤º",value:"info"})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]))]),_:1})]),_:1},8,["data"])])])])]),_:1},8,["modelValue"])])}}},Xl=ye(Tl,[["__scopeId","data-v-11ac4d60"]]);export{Xl as default};
