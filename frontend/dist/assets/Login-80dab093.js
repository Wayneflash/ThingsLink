import{_ as I,u as M,a as N,r as f,o as d,c,b as t,F as _,d as v,e as l,w as n,f as R,g as Y,h as B,n as y,i as h,j as F,k as Q,l as q,t as b,m as C,p as E,q as G,s as A,v as J,x as K,E as x}from"./index-d915c72b.js";import{l as O}from"./auth-07eba1e1.js";const U={class:"login-container"},j={class:"bg-decoration"},P={class:"connection-nodes"},H={class:"data-packages"},W={class:"connection-lines",viewBox:"0 0 1920 1080",preserveAspectRatio:"none"},Z=["d"],ee={class:"login-left"},te={class:"login-left-content"},se={class:"logo-section"},oe={class:"logo-icon-wrapper"},le={class:"logo-icon"},ne={class:"feature-list"},ae={class:"feature-icon-wrapper"},re={class:"feature-content"},ie={class:"feature-title"},de={class:"feature-desc"},ce={class:"login-right"},ue={class:"login-form-wrapper"},pe={__name:"Login",setup(fe){const S=M(),V=N(),w=Y(null),g=Y(!1),i=B({username:"",password:""}),$={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},T=[{icon:A,title:"设备实时监控",desc:"全方位设备状态监测与数据采集"},{icon:J,title:"数据智能分析",desc:"AI驱动数据洞察与预测分析"},{icon:K,title:"告警及时通知",desc:"智能预警系统保障设备安全"}],D=[{path:"M200,150 Q400,200 600,180 T1000,200"},{path:"M300,400 Q500,300 800,350 T1200,400"},{path:"M500,600 Q700,500 900,550 T1300,600"},{path:"M150,500 Q350,450 600,500 T1050,550"},{path:"M700,250 Q900,300 1100,280 T1500,300"}],L=a=>{const e=[{top:"8%",left:"12%"},{top:"22%",left:"78%"},{top:"38%",left:"18%"},{top:"52%",left:"72%"},{top:"68%",left:"28%"},{top:"12%",left:"48%"},{top:"28%",left:"58%"},{top:"45%",left:"38%"},{top:"62%",left:"68%"},{top:"18%",left:"32%"},{top:"35%",left:"82%"},{top:"55%",left:"52%"},{top:"75%",left:"62%"},{top:"25%",left:"25%"},{top:"42%",left:"88%"}],s=e[(a-1)%e.length],r=(a-1)*.25;return{top:s.top,left:s.left,animationDelay:`${r}s`}},z=a=>{const e=[{startX:200,startY:150,endX:800,endY:350,duration:4},{startX:400,startY:400,endX:1200,endY:500,duration:5},{startX:600,startY:250,endX:1e3,endY:550,duration:6},{startX:300,startY:500,endX:1100,endY:300,duration:5.5},{startX:500,startY:180,endX:900,endY:450,duration:4.5},{startX:700,startY:350,endX:1300,endY:600,duration:6.5}],s=e[(a-1)%e.length],r=(a-1)*.8;return{"--start-x":`${s.startX}px`,"--start-y":`${s.startY}px`,"--end-x":`${s.endX}px`,"--end-y":`${s.endY}px`,animationDuration:`${s.duration}s`,animationDelay:`${r}s`}},X=async()=>{var a;if(w.value)try{if(!await w.value.validate())return;g.value=!0;const s=await O({username:i.username,password:i.password});if(s){const{token:r,user:u,menus:k}=s;localStorage.setItem("token",r),localStorage.setItem("userInfo",JSON.stringify(u)),localStorage.setItem("menus",JSON.stringify(k||[]));const m=V.query.redirect||"/overview";try{S.replace(m),setTimeout(()=>{x.success("登录成功")},100)}catch(o){console.error("路由跳转失败:",o),window.location.href=m}}else x.error(s.message||"登录失败")}catch(e){console.error("登录失败:",e),e!==!1&&!((a=e.message)!=null&&a.includes("validate"))&&x.error(e.message||"登录失败，请稍后重试")}finally{g.value=!1}};return(a,e)=>{const s=f("el-icon"),r=f("el-input"),u=f("el-form-item"),k=f("el-button"),m=f("el-form");return d(),c("div",U,[t("div",j,[e[5]||(e[5]=t("div",{class:"grid-pattern"},null,-1)),e[6]||(e[6]=t("div",{class:"data-flow"},null,-1)),t("div",P,[(d(),c(_,null,v(15,o=>t("div",{key:o,class:"node",style:y(L(o))},[...e[2]||(e[2]=[t("div",{class:"node-core"},null,-1),t("div",{class:"node-ring"},null,-1)])],4)),64))]),t("div",H,[(d(),c(_,null,v(6,o=>t("div",{key:o,class:"data-package",style:y(z(o))},[...e[3]||(e[3]=[t("div",{class:"package-content"},null,-1)])],4)),64))]),(d(),c("svg",W,[e[4]||(e[4]=t("defs",null,[t("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[t("stop",{offset:"0%",style:{"stop-color":"rgba(102, 126, 234, 0.3)","stop-opacity":"0"}}),t("stop",{offset:"50%",style:{"stop-color":"rgba(102, 126, 234, 0.6)","stop-opacity":"1"}}),t("stop",{offset:"100%",style:{"stop-color":"rgba(118, 75, 162, 0.3)","stop-opacity":"0"}})])],-1)),(d(),c(_,null,v(D,(o,p)=>t("path",{key:p,d:o.path,class:"connection-line",style:y({animationDelay:`${p*.5}s`}),stroke:"url(#lineGradient)",fill:"none","stroke-width":"2"},null,12,Z)),64))]))]),t("div",ee,[t("div",te,[t("div",se,[t("div",oe,[e[7]||(e[7]=t("div",{class:"logo-icon-glow"},null,-1)),e[8]||(e[8]=t("div",{class:"logo-icon-pulse"},null,-1)),t("div",le,[l(s,{size:52},{default:n(()=>[l(h(F))]),_:1})])]),e[9]||(e[9]=t("h1",{class:"logo-title"},"ThingsLink",-1)),e[10]||(e[10]=t("p",{class:"logo-subtitle"},"智慧物联网平台",-1)),e[11]||(e[11]=t("div",{class:"logo-tagline"},"连接万物，智能未来",-1))]),t("div",ne,[(d(),c(_,null,v(T,(o,p)=>t("div",{key:p,class:"feature-item",style:y({animationDelay:`${p*.15}s`})},[t("div",ae,[e[12]||(e[12]=t("div",{class:"feature-icon-bg"},null,-1)),l(s,{size:24,class:"feature-icon"},{default:n(()=>[(d(),Q(q(o.icon)))]),_:2},1024)]),t("div",re,[t("div",ie,b(o.title),1),t("div",de,b(o.desc),1)])],4)),64))])])]),t("div",ce,[t("div",ue,[e[13]||(e[13]=t("div",{class:"form-header"},[t("h2",null,"欢迎登录"),t("p",null,"请输入您的账号和密码")],-1)),l(m,{ref_key:"loginFormRef",ref:w,model:i,rules:$,class:"login-form",onKeyup:R(X,["enter"])},{default:n(()=>[l(u,{prop:"username"},{default:n(()=>[l(r,{modelValue:i.username,"onUpdate:modelValue":e[0]||(e[0]=o=>i.username=o),placeholder:"请输入用户名",size:"large",clearable:"",autocomplete:"off"},{prefix:n(()=>[l(s,{class:"input-icon"},{default:n(()=>[l(h(C))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{prop:"password"},{default:n(()=>[l(r,{modelValue:i.password,"onUpdate:modelValue":e[1]||(e[1]=o=>i.password=o),type:"password",placeholder:"请输入密码",size:"large","show-password":"",clearable:"",autocomplete:"new-password"},{prefix:n(()=>[l(s,{class:"input-icon"},{default:n(()=>[l(h(E))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:n(()=>[l(k,{type:"primary",size:"large",class:"login-button",loading:g.value,onClick:X},{default:n(()=>[G(b(g.value?"登录中...":"登 录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}},_e=I(pe,[["__scopeId","data-v-51625fe9"]]);export{_e as default};
