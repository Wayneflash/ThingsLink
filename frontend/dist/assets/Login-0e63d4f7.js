import{r as V,_ as x,u as z,a as S,b as w,c as q,d as i,o as I,e as L,f as o,g as s,w as t,h as N,i as n,j as R,m as B,k as C,l as E,n as F,p as J,q as K,t as O,E as p}from"./index-f4aa5fa2.js";const T=f=>V({url:"/auth/login",method:"post",data:f});const U={class:"login-container"},j={class:"login-left"},D={class:"login-left-content"},M={class:"logo-section"},A={class:"logo-icon"},G={class:"feature-list"},H={class:"feature-item"},P={class:"feature-item"},Q={class:"feature-item"},W={class:"login-right"},X={class:"login-form-wrapper"},Y={__name:"Login",setup(f){const y=z(),h=S(),_=w(null),u=w(!1),a=q({username:"",password:""}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},g=async()=>{_.value&&await _.value.validate(async v=>{if(v)try{u.value=!0;const e=await T({username:a.username,password:a.password});if(e){const{token:l,user:d,menus:r}=e;localStorage.setItem("token",l),localStorage.setItem("userInfo",JSON.stringify(d)),localStorage.setItem("menus",JSON.stringify(r||[])),p.success("登录成功");const c=h.query.redirect||"/overview";y.push(c)}else p.error(e.message||"登录失败")}catch(e){console.error("登录失败:",e),p.error(e.message||"登录失败，请稍后重试")}finally{u.value=!1}})};return(v,e)=>{const l=i("el-icon"),d=i("el-input"),r=i("el-form-item"),c=i("el-button"),k=i("el-form");return I(),L("div",U,[o("div",j,[o("div",D,[o("div",M,[o("div",A,[s(l,{size:48},{default:t(()=>[s(n(R))]),_:1})]),e[2]||(e[2]=o("h1",{class:"logo-title"},"ThingsLink",-1)),e[3]||(e[3]=o("p",{class:"logo-subtitle"},"物联网平台",-1))]),o("div",G,[o("div",H,[s(l,{size:20},{default:t(()=>[s(n(B))]),_:1}),e[4]||(e[4]=o("span",null,"设备实时监控",-1))]),o("div",P,[s(l,{size:20},{default:t(()=>[s(n(C))]),_:1}),e[5]||(e[5]=o("span",null,"数据智能分析",-1))]),o("div",Q,[s(l,{size:20},{default:t(()=>[s(n(E))]),_:1}),e[6]||(e[6]=o("span",null,"告警及时通知",-1))])])])]),o("div",W,[o("div",X,[e[7]||(e[7]=o("div",{class:"form-header"},[o("h2",null,"欢迎登录"),o("p",null,"请输入您的账号和密码")],-1)),s(k,{ref_key:"loginFormRef",ref:_,model:a,rules:b,class:"login-form",onKeyup:N(g,["enter"])},{default:t(()=>[s(r,{prop:"username"},{default:t(()=>[s(d,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=m=>a.username=m),placeholder:"请输入用户名",size:"large",clearable:"",autocomplete:"off"},{prefix:t(()=>[s(l,null,{default:t(()=>[s(n(F))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(r,{prop:"password"},{default:t(()=>[s(d,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=m=>a.password=m),type:"password",placeholder:"请输入密码",size:"large","show-password":"",clearable:"",autocomplete:"new-password"},{prefix:t(()=>[s(l,null,{default:t(()=>[s(n(J))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(r,null,{default:t(()=>[s(c,{type:"primary",size:"large",class:"login-button",loading:u.value,onClick:g},{default:t(()=>[K(O(u.value?"登录中...":"登 录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}},$=x(Y,[["__scopeId","data-v-9c624a92"]]);export{$ as default};
